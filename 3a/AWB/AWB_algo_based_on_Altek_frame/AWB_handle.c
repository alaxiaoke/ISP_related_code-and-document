
#include "AWB_handle.h"
#include <stdio.h>
#include <stdarg.h>
#include <stdlib.h>
#include <math.h>


void sort_wp(int* a, int l, int* min, int* min2);


static int std_wp[6][4] =                      //修改此参数需改动 BU_AwbPara.h 的 AWB_TUNING_FILE_LIGHTSOURCE_ARRAY_PARA0
{ { 106, 26, 2300, 9}, \
{ 78,  34, 3000, 13}, \
{ 56,  41, 4150, 12}, \
{ 52,  53, 5000, 14}, \
{ 44,  63, 6500, 10}, \
{ 42,  66, 7500, 12} };

static float high_ccm[] = { 1.254f,-0.431f, 0.188f,
-0.110f,1.415f,-0.305f,
-0.0369f,-0.374f,1.421f };
static float D65_ccm[] = { 1.254f,-0.431f, 0.188f,
-0.110f,1.401f,-0.295f,
-0.0369f,-0.374f,1.421f };
static float cwf_ccm[9] = { 1.22f, -0.34f, 0.12f,
-0.15f, 1.34f, -0.19f,
0.05f, -0.45f, 1.40f };
static float tl84_ccm[] = { 1.22f, -0.34f, 0.12f,
-0.15f, 1.34f, -0.19f,
0.05f, -0.45f, 1.40f };
static float A_ccm[] = { 1.32f, -0.24f, 0.08f,
-0.19f, 1.32f, -0.13f,
0.18f, -0.58f, 1.40f };

static float* ccm_list[6] = { A_ccm, tl84_ccm, cwf_ccm,cwf_ccm, D65_ccm, high_ccm };



//static float A_lsc0[] = { 25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,
//25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f,25.633f, };


//static float A_lsc0[] = { 11.633f,9.287f,7.468f,6.085f,5.060f,4.330f,3.844f,3.569f,3.483f,3.580f,3.867f,4.366f,5.113f,6.157f,7.564f,9.412f,11.792f,
//9.892f,7.740f,6.089f,4.848f,3.641f,3.259f,2.942f,2.735f,2.691f,2.764f,2.977f,3.278f,3.646f,4.918f,6.184f,7.864f,10.053f,
//8.569f,6.576f,5.063f,3.656f,3.137f,2.641f,2.253f,2.033f,1.965f,2.056f,2.285f,2.672f,3.160f,3.658f,5.156f,6.700f,8.731f,
//7.602f,5.733f,3.888f,3.257f,2.615f,2.070f,1.714f,1.521f,1.467f,1.537f,1.737f,2.116f,2.661f,3.281f,3.922f,5.857f,7.766f,
//6.941f,5.161f,3.607f,2.918f,2.208f,1.687f,1.379f,1.226f,1.184f,1.240f,1.401f,1.736f,2.273f,2.963f,3.580f,5.288f,7.109f,
//6.551f,4.827f,3.441f,2.673f,1.956f,1.479f,1.207f,1.079f,1.045f,1.092f,1.234f,1.527f,2.035f,2.736f,3.434f,4.958f,6.726f,
//6.412f,4.708f,3.357f,2.585f,1.875f,1.407f,1.150f,1.030f,1.000f,1.047f,1.183f,1.461f,1.956f,2.664f,3.382f,4.845f,6.595f,
//6.515f,4.797f,3.455f,2.674f,1.950f,1.466f,1.195f,1.068f,1.034f,1.082f,1.226f,1.520f,2.035f,2.754f,3.473f,4.944f,6.711f,
//6.866f,5.100f,3.651f,2.908f,2.174f,1.653f,1.346f,1.199f,1.156f,1.215f,1.380f,1.711f,2.268f,2.973f,3.685f,5.260f,7.079f,
//7.485f,5.635f,3.947f,3.257f,2.574f,2.009f,1.651f,1.463f,1.414f,1.482f,1.685f,2.075f,2.644f,3.306f,3.965f,5.812f,7.718f,
//8.405f,6.437f,4.946f,3.639f,3.096f,2.549f,2.155f,1.936f,1.871f,1.958f,2.194f,2.607f,3.121f,3.683f,5.095f,6.636f,8.664f,
//9.671f,7.552f,5.929f,4.711f,3.615f,3.196f,2.855f,2.627f,2.559f,2.655f,2.874f,3.224f,3.603f,4.838f,6.100f,7.777f,9.963f,
//11.345f,9.040f,7.256f,5.901f,4.899f,4.187f,3.716f,3.452f,3.373f,3.474f,3.763f,4.262f,5.008f,6.050f,7.453f,9.298f,11.675f, };
//
//static float A_lsc1[] = { 7.436f,6.100f,5.050f,4.240f,3.630f,3.190f,2.894f,2.725f,2.673f,2.734f,2.912f,3.217f,3.669f,4.292f,5.119f,6.188f,7.547f,
//6.415f,5.179f,4.216f,3.479f,2.756f,2.498f,2.295f,2.165f,2.128f,2.185f,2.321f,2.523f,2.794f,3.529f,4.282f,5.265f,6.524f,
//5.635f,4.481f,3.588f,2.764f,2.413f,2.099f,1.857f,1.718f,1.668f,1.732f,1.880f,2.120f,2.423f,2.783f,3.652f,4.564f,5.741f,
//5.061f,3.971f,2.928f,2.484f,2.081f,1.741f,1.505f,1.372f,1.335f,1.385f,1.520f,1.768f,2.119f,2.498f,2.963f,4.052f,5.166f,
//4.667f,3.624f,2.700f,2.257f,1.813f,1.480f,1.272f,1.163f,1.134f,1.174f,1.287f,1.511f,1.865f,2.287f,2.695f,3.705f,4.772f,
//4.436f,3.420f,2.575f,2.093f,1.654f,1.336f,1.148f,1.059f,1.036f,1.069f,1.167f,1.367f,1.705f,2.137f,2.588f,3.502f,4.542f,
//4.355f,3.350f,2.541f,2.038f,1.592f,1.286f,1.111f,1.024f,1.000f,1.036f,1.131f,1.323f,1.645f,2.097f,2.548f,3.434f,4.465f,
//4.421f,3.408f,2.596f,2.103f,1.653f,1.330f,1.147f,1.055f,1.030f,1.062f,1.167f,1.368f,1.703f,2.151f,2.604f,3.496f,4.536f,
//4.637f,3.598f,2.747f,2.258f,1.805f,1.464f,1.256f,1.151f,1.120f,1.163f,1.281f,1.505f,1.864f,2.301f,2.772f,3.691f,4.758f,
//5.013f,3.930f,2.966f,2.495f,2.070f,1.707f,1.471f,1.340f,1.303f,1.354f,1.494f,1.746f,2.116f,2.514f,3.003f,4.031f,5.144f,
//5.568f,4.423f,3.539f,2.764f,2.393f,2.056f,1.808f,1.661f,1.618f,1.676f,1.828f,2.096f,2.422f,2.779f,3.624f,4.534f,5.710f,
//6.326f,5.102f,4.149f,3.420f,2.749f,2.462f,2.255f,2.107f,2.062f,2.116f,2.264f,2.481f,2.746f,3.492f,4.244f,5.225f,6.483f,
//7.321f,6.000f,4.962f,4.162f,3.561f,3.128f,2.837f,2.672f,2.623f,2.685f,2.864f,3.170f,3.621f,4.244f,5.069f,6.137f,7.495f, };
//
//static float A_lsc2[] = { 7.033f,5.790f,4.811f,4.055f,3.485f,3.074f,2.798f,2.641f,2.594f,2.654f,2.824f,3.116f,3.545f,4.135f,4.916f,5.925f,7.203f,
//6.073f,4.922f,4.024f,3.335f,2.651f,2.403f,2.216f,2.083f,2.081f,2.131f,2.264f,2.475f,2.719f,3.412f,4.126f,5.054f,6.240f,
//5.338f,4.264f,3.431f,2.669f,2.333f,2.043f,1.802f,1.676f,1.643f,1.697f,1.849f,2.083f,2.366f,2.708f,3.530f,4.392f,5.503f,
//4.797f,3.782f,2.797f,2.385f,2.017f,1.692f,1.478f,1.347f,1.311f,1.367f,1.501f,1.744f,2.076f,2.425f,2.858f,3.909f,4.961f,
//4.427f,3.454f,2.591f,2.181f,1.765f,1.447f,1.248f,1.147f,1.122f,1.166f,1.276f,1.489f,1.831f,2.226f,2.617f,3.582f,4.591f,
//4.208f,3.262f,2.477f,2.024f,1.606f,1.307f,1.131f,1.051f,1.033f,1.068f,1.161f,1.349f,1.675f,2.099f,2.516f,3.391f,4.376f,
//4.131f,3.194f,2.432f,1.972f,1.553f,1.257f,1.095f,1.018f,1.000f,1.032f,1.126f,1.309f,1.625f,2.044f,2.468f,3.328f,4.305f,
//4.192f,3.248f,2.481f,2.030f,1.610f,1.305f,1.138f,1.048f,1.030f,1.065f,1.163f,1.357f,1.677f,2.111f,2.548f,3.389f,4.374f,
//4.394f,3.427f,2.616f,2.188f,1.756f,1.434f,1.239f,1.140f,1.116f,1.158f,1.278f,1.493f,1.835f,2.244f,2.698f,3.577f,4.588f,
//4.746f,3.739f,2.825f,2.403f,2.000f,1.668f,1.445f,1.319f,1.287f,1.342f,1.477f,1.726f,2.083f,2.460f,2.907f,3.902f,4.956f,
//5.266f,4.203f,3.380f,2.638f,2.327f,1.991f,1.764f,1.624f,1.591f,1.644f,1.798f,2.061f,2.364f,2.715f,3.517f,4.382f,5.495f,
//5.977f,4.841f,3.955f,3.276f,2.617f,2.373f,2.162f,2.029f,1.995f,2.047f,2.204f,2.396f,2.653f,3.393f,4.108f,5.040f,6.230f,
//6.910f,5.684f,4.720f,3.977f,3.418f,3.015f,2.746f,2.595f,2.552f,2.616f,2.790f,3.084f,3.516f,4.109f,4.894f,5.906f,7.190f, };
//
//static float cwf_lsc0[] = { 7.184f,5.857f,4.817f,4.016f,3.416f,2.983f,2.692f,2.525f,2.472f,2.529f,2.699f,2.995f,3.433f,4.039f,4.847f,5.896f,7.234f,
//6.245f,5.013f,4.055f,3.324f,2.643f,2.376f,2.188f,2.046f,2.018f,2.061f,2.203f,2.399f,2.662f,3.348f,4.087f,5.055f,6.299f,
//5.528f,4.373f,3.481f,2.663f,2.311f,2.000f,1.761f,1.622f,1.574f,1.630f,1.772f,2.014f,2.308f,2.673f,3.515f,4.417f,5.585f,
//5.001f,3.906f,2.866f,2.421f,2.006f,1.658f,1.433f,1.299f,1.266f,1.310f,1.433f,1.679f,2.030f,2.414f,2.885f,3.953f,5.062f,
//4.642f,3.590f,2.685f,2.217f,1.775f,1.435f,1.226f,1.123f,1.097f,1.129f,1.238f,1.449f,1.805f,2.237f,2.655f,3.640f,4.707f,
//4.436f,3.409f,2.596f,2.095f,1.625f,1.309f,1.128f,1.043f,1.020f,1.050f,1.140f,1.331f,1.659f,2.124f,2.583f,3.463f,4.506f,
//4.372f,3.354f,2.550f,2.042f,1.577f,1.272f,1.097f,1.020f,1.000f,1.030f,1.111f,1.295f,1.624f,2.078f,2.551f,3.411f,4.447f,
//4.448f,3.420f,2.596f,2.100f,1.633f,1.308f,1.130f,1.049f,1.024f,1.057f,1.148f,1.341f,1.671f,2.128f,2.616f,3.483f,4.530f,
//4.666f,3.612f,2.739f,2.246f,1.777f,1.436f,1.234f,1.134f,1.106f,1.143f,1.252f,1.470f,1.826f,2.275f,2.769f,3.682f,4.756f,
//5.037f,3.940f,2.959f,2.481f,2.044f,1.677f,1.444f,1.317f,1.282f,1.329f,1.461f,1.714f,2.076f,2.502f,2.978f,4.018f,5.138f,
//5.579f,4.421f,3.528f,2.770f,2.383f,2.035f,1.791f,1.650f,1.598f,1.652f,1.807f,2.068f,2.396f,2.780f,3.595f,4.509f,5.691f,
//6.314f,5.078f,4.117f,3.383f,2.770f,2.468f,2.252f,2.119f,2.059f,2.128f,2.265f,2.489f,2.747f,3.442f,4.194f,5.178f,6.441f,
//7.272f,5.941f,4.898f,4.095f,3.492f,3.058f,2.767f,2.602f,2.551f,2.613f,2.790f,3.093f,3.542f,4.163f,4.987f,6.056f,7.416f, };
//
//static float cwf_lsc1[] = { 6.212f,5.120f,4.259f,3.594f,3.091f,2.728f,2.482f,2.342f,2.298f,2.347f,2.493f,2.744f,3.115f,3.626f,4.301f,5.174f,6.279f,
//5.428f,4.411f,3.615f,3.004f,2.428f,2.202f,2.032f,1.918f,1.895f,1.937f,2.054f,2.229f,2.460f,3.036f,3.657f,4.465f,5.496f,
//4.826f,3.871f,3.128f,2.447f,2.145f,1.874f,1.668f,1.552f,1.507f,1.558f,1.690f,1.892f,2.148f,2.463f,3.170f,3.925f,4.896f,
//4.385f,3.477f,2.618f,2.227f,1.883f,1.589f,1.385f,1.277f,1.239f,1.279f,1.392f,1.605f,1.905f,2.236f,2.657f,3.532f,4.456f,
//4.083f,3.209f,2.454f,2.057f,1.676f,1.390f,1.204f,1.115f,1.084f,1.119f,1.216f,1.408f,1.711f,2.084f,2.444f,3.266f,4.157f,
//3.910f,3.056f,2.368f,1.938f,1.556f,1.276f,1.119f,1.041f,1.020f,1.046f,1.128f,1.296f,1.589f,1.975f,2.362f,3.115f,3.986f,
//3.857f,3.009f,2.332f,1.892f,1.508f,1.238f,1.092f,1.024f,1.000f,1.026f,1.101f,1.267f,1.553f,1.937f,2.342f,3.071f,3.937f,
//3.921f,3.066f,2.376f,1.950f,1.555f,1.277f,1.122f,1.049f,1.026f,1.050f,1.132f,1.307f,1.597f,1.988f,2.383f,3.132f,4.006f,
//4.105f,3.230f,2.489f,2.071f,1.685f,1.390f,1.212f,1.123f,1.097f,1.129f,1.232f,1.415f,1.730f,2.107f,2.516f,3.301f,4.197f,
//4.418f,3.508f,2.688f,2.280f,1.914f,1.597f,1.400f,1.288f,1.256f,1.298f,1.414f,1.631f,1.950f,2.306f,2.716f,3.586f,4.518f,
//4.874f,3.915f,3.170f,2.528f,2.212f,1.913f,1.703f,1.577f,1.539f,1.583f,1.721f,1.943f,2.219f,2.552f,3.237f,4.002f,4.983f,
//5.490f,4.470f,3.672f,3.058f,2.537f,2.298f,2.112f,1.993f,1.941f,1.992f,2.116f,2.306f,2.541f,3.115f,3.746f,4.566f,5.612f,
//6.292f,5.197f,4.333f,3.665f,3.160f,2.795f,2.550f,2.410f,2.367f,2.420f,2.571f,2.829f,3.208f,3.729f,4.418f,5.305f,6.428f, };
//
//static float cwf_lsc2[] = { 5.577f,4.635f,3.889f,3.311f,2.873f,2.555f,2.342f,2.220f,2.184f,2.232f,2.366f,2.593f,2.926f,3.382f,3.983f,4.754f,5.727f,
//4.887f,4.008f,3.317f,2.784f,2.279f,2.091f,1.923f,1.823f,1.799f,1.851f,1.953f,2.120f,2.344f,2.851f,3.404f,4.119f,5.028f,
//4.357f,3.529f,2.883f,2.300f,2.024f,1.779f,1.599f,1.491f,1.458f,1.505f,1.629f,1.820f,2.057f,2.347f,2.965f,3.635f,4.492f,
//3.967f,3.179f,2.449f,2.098f,1.778f,1.528f,1.341f,1.240f,1.212f,1.251f,1.357f,1.555f,1.836f,2.131f,2.509f,3.280f,4.096f,
//3.702f,2.942f,2.286f,1.939f,1.603f,1.338f,1.178f,1.098f,1.077f,1.112f,1.198f,1.372f,1.650f,1.972f,2.302f,3.040f,3.827f,
//3.549f,2.806f,2.202f,1.823f,1.487f,1.233f,1.099f,1.034f,1.019f,1.048f,1.120f,1.271f,1.533f,1.884f,2.222f,2.902f,3.672f,
//3.502f,2.764f,2.155f,1.773f,1.438f,1.200f,1.070f,1.014f,1.000f,1.026f,1.096f,1.235f,1.492f,1.836f,2.181f,2.860f,3.626f,
//3.559f,2.815f,2.207f,1.830f,1.482f,1.240f,1.105f,1.037f,1.020f,1.046f,1.123f,1.277f,1.532f,1.887f,2.235f,2.913f,3.684f,
//3.722f,2.961f,2.309f,1.954f,1.601f,1.340f,1.185f,1.105f,1.089f,1.115f,1.208f,1.375f,1.662f,1.992f,2.371f,3.062f,3.852f,
//4.000f,3.208f,2.480f,2.144f,1.804f,1.539f,1.355f,1.253f,1.230f,1.269f,1.376f,1.575f,1.852f,2.170f,2.565f,3.314f,4.135f,
//4.402f,3.570f,2.920f,2.373f,2.067f,1.818f,1.623f,1.502f,1.474f,1.529f,1.651f,1.863f,2.116f,2.412f,3.008f,3.683f,4.545f,
//4.947f,4.062f,3.367f,2.831f,2.362f,2.145f,1.972f,1.869f,1.822f,1.875f,1.994f,2.166f,2.390f,2.903f,3.461f,4.183f,5.099f,
//5.654f,4.705f,3.955f,3.372f,2.930f,2.610f,2.395f,2.272f,2.237f,2.285f,2.421f,2.652f,2.989f,3.450f,4.057f,4.836f,5.818f, };
//
//static float d65_lsc0[] = { 9.443f,7.570f,6.116f,5.009f,4.188f,3.604f,3.217f,3.000f,2.938f,3.025f,3.269f,3.686f,4.307f,5.172f,6.332f,7.850f,9.802f,
//8.124f,6.394f,5.065f,4.063f,3.085f,2.780f,2.529f,2.349f,2.303f,2.384f,2.575f,2.859f,3.183f,4.212f,5.265f,6.657f,8.463f,
//7.121f,5.509f,4.280f,3.135f,2.713f,2.295f,1.979f,1.808f,1.749f,1.830f,2.033f,2.364f,2.776f,3.223f,4.468f,5.757f,7.444f,
//6.390f,4.868f,3.383f,2.836f,2.306f,1.856f,1.562f,1.400f,1.353f,1.423f,1.604f,1.934f,2.409f,2.928f,3.516f,5.105f,6.701f,
//5.895f,4.437f,3.171f,2.591f,2.002f,1.567f,1.297f,1.166f,1.135f,1.185f,1.338f,1.629f,2.107f,2.707f,3.231f,4.668f,6.199f,
//5.612f,4.193f,3.049f,2.415f,1.811f,1.397f,1.165f,1.053f,1.026f,1.076f,1.209f,1.473f,1.918f,2.530f,3.139f,4.421f,5.914f,
//5.527f,4.119f,2.993f,2.347f,1.748f,1.350f,1.130f,1.024f,1.000f,1.046f,1.171f,1.427f,1.860f,2.467f,3.084f,4.350f,5.832f,
//5.635f,4.213f,3.063f,2.421f,1.820f,1.409f,1.173f,1.066f,1.039f,1.083f,1.220f,1.486f,1.938f,2.558f,3.167f,4.450f,5.948f,
//5.943f,4.480f,3.256f,2.634f,2.021f,1.578f,1.315f,1.184f,1.153f,1.206f,1.363f,1.655f,2.135f,2.749f,3.377f,4.728f,6.269f,
//6.465f,4.935f,3.525f,2.941f,2.364f,1.892f,1.586f,1.427f,1.382f,1.450f,1.636f,1.985f,2.482f,3.033f,3.633f,5.199f,6.810f,
//7.227f,5.604f,4.367f,3.293f,2.811f,2.359f,2.037f,1.841f,1.790f,1.868f,2.091f,2.446f,2.898f,3.389f,4.583f,5.890f,7.598f,
//8.265f,6.523f,5.182f,4.171f,3.289f,2.915f,2.623f,2.440f,2.381f,2.472f,2.677f,2.976f,3.331f,4.349f,5.421f,6.836f,8.668f,
//9.626f,7.738f,6.271f,5.153f,4.323f,3.732f,3.341f,3.123f,3.062f,3.154f,3.405f,3.835f,4.471f,5.354f,6.538f,8.084f,10.067f, };
//
//static float d65_lsc1[] = { 6.461f,5.307f,4.400f,3.701f,3.176f,2.798f,2.546f,2.404f,2.365f,2.425f,2.588f,2.865f,3.271f,3.829f,4.567f,5.521f,6.732f,
//5.634f,4.559f,3.722f,3.082f,2.470f,2.230f,2.051f,1.945f,1.916f,1.969f,2.099f,2.290f,2.548f,3.198f,3.876f,4.758f,5.886f,
//5.001f,3.992f,3.211f,2.500f,2.182f,1.905f,1.690f,1.569f,1.528f,1.590f,1.738f,1.962f,2.251f,2.580f,3.354f,4.178f,5.239f,
//4.537f,3.579f,2.680f,2.276f,1.912f,1.608f,1.401f,1.286f,1.254f,1.301f,1.434f,1.660f,1.990f,2.343f,2.802f,3.755f,4.763f,
//4.222f,3.300f,2.504f,2.098f,1.701f,1.399f,1.213f,1.116f,1.093f,1.136f,1.246f,1.453f,1.778f,2.177f,2.556f,3.469f,4.441f,
//4.043f,3.142f,2.396f,1.963f,1.567f,1.285f,1.121f,1.040f,1.022f,1.058f,1.151f,1.336f,1.644f,2.059f,2.476f,3.306f,4.256f,
//3.991f,3.096f,2.365f,1.919f,1.520f,1.247f,1.089f,1.018f,1.000f,1.036f,1.122f,1.301f,1.605f,2.021f,2.436f,3.259f,4.203f,
//4.063f,3.160f,2.410f,1.977f,1.573f,1.291f,1.129f,1.049f,1.029f,1.062f,1.158f,1.346f,1.656f,2.071f,2.497f,3.324f,4.277f,
//4.264f,3.336f,2.543f,2.125f,1.714f,1.414f,1.230f,1.137f,1.114f,1.151f,1.266f,1.471f,1.801f,2.213f,2.644f,3.505f,4.482f,
//4.601f,3.636f,2.764f,2.345f,1.957f,1.639f,1.427f,1.310f,1.280f,1.328f,1.457f,1.696f,2.038f,2.425f,2.864f,3.812f,4.827f,
//5.090f,4.072f,3.283f,2.600f,2.272f,1.959f,1.737f,1.602f,1.567f,1.625f,1.773f,2.018f,2.326f,2.672f,3.426f,4.258f,5.328f,
//5.753f,4.667f,3.819f,3.170f,2.593f,2.335f,2.140f,2.016f,1.982f,2.034f,2.174f,2.374f,2.632f,3.286f,3.973f,4.865f,6.005f,
//6.614f,5.446f,4.526f,3.817f,3.283f,2.899f,2.642f,2.497f,2.457f,2.518f,2.684f,2.965f,3.378f,3.945f,4.694f,5.660f,6.884f, };
//
//static float d65_lsc2[] = { 5.725f,4.745f,3.971f,3.372f,2.921f,2.594f,2.376f,2.253f,2.220f,2.273f,2.416f,2.658f,3.011f,3.494f,4.129f,4.947f,5.978f,
//5.006f,4.092f,3.376f,2.826f,2.303f,2.094f,1.931f,1.824f,1.813f,1.866f,1.992f,2.160f,2.401f,2.939f,3.524f,4.282f,5.246f,
//4.454f,3.595f,2.927f,2.333f,2.041f,1.794f,1.609f,1.492f,1.464f,1.518f,1.654f,1.858f,2.105f,2.415f,3.066f,3.776f,4.684f,
//4.049f,3.232f,2.471f,2.120f,1.801f,1.533f,1.346f,1.239f,1.215f,1.260f,1.379f,1.587f,1.878f,2.192f,2.587f,3.406f,4.271f,
//3.773f,2.986f,2.312f,1.951f,1.605f,1.340f,1.173f,1.094f,1.074f,1.115f,1.206f,1.398f,1.682f,2.035f,2.384f,3.155f,3.990f,
//3.615f,2.846f,2.211f,1.828f,1.483f,1.237f,1.094f,1.030f,1.017f,1.046f,1.127f,1.289f,1.565f,1.917f,2.288f,3.013f,3.830f,
//3.567f,2.804f,2.174f,1.779f,1.438f,1.197f,1.069f,1.013f,1.000f,1.030f,1.103f,1.255f,1.521f,1.878f,2.249f,2.971f,3.783f,
//3.627f,2.857f,2.219f,1.830f,1.486f,1.235f,1.100f,1.038f,1.024f,1.052f,1.136f,1.298f,1.567f,1.934f,2.297f,3.029f,3.848f,
//3.799f,3.010f,2.347f,1.971f,1.620f,1.352f,1.193f,1.112f,1.095f,1.129f,1.229f,1.409f,1.701f,2.062f,2.442f,3.188f,4.027f,
//4.089f,3.269f,2.548f,2.169f,1.834f,1.554f,1.364f,1.260f,1.237f,1.283f,1.402f,1.616f,1.913f,2.256f,2.657f,3.457f,4.329f,
//4.510f,3.647f,2.974f,2.402f,2.106f,1.838f,1.636f,1.520f,1.495f,1.542f,1.678f,1.904f,2.177f,2.495f,3.129f,3.847f,4.765f,
//5.080f,4.161f,3.441f,2.887f,2.385f,2.156f,1.988f,1.876f,1.833f,1.892f,2.019f,2.210f,2.444f,3.015f,3.609f,4.378f,5.353f,
//5.821f,4.834f,4.055f,3.452f,2.996f,2.667f,2.447f,2.324f,2.292f,2.347f,2.495f,2.742f,3.102f,3.594f,4.240f,5.070f,6.116f, };
//
//static float tl84_lsc0[] = { 6.961f,5.691f,4.695f,3.927f,3.350f,2.933f,2.653f,2.492f,2.441f,2.495f,2.660f,2.944f,3.365f,3.947f,4.721f,5.725f,7.003f,
//6.056f,4.877f,3.958f,3.256f,2.613f,2.357f,2.159f,2.035f,1.995f,2.036f,2.163f,2.369f,2.627f,3.279f,3.988f,4.915f,6.104f,
//5.362f,4.257f,3.403f,2.630f,2.281f,1.977f,1.743f,1.611f,1.563f,1.622f,1.755f,1.989f,2.278f,2.631f,3.435f,4.300f,5.417f,
//4.852f,3.805f,2.811f,2.383f,1.979f,1.647f,1.418f,1.298f,1.261f,1.305f,1.432f,1.659f,1.995f,2.381f,2.851f,3.851f,4.913f,
//4.504f,3.497f,2.634f,2.176f,1.750f,1.421f,1.224f,1.124f,1.099f,1.130f,1.232f,1.440f,1.783f,2.208f,2.621f,3.548f,4.570f,
//4.302f,3.320f,2.542f,2.050f,1.615f,1.304f,1.124f,1.039f,1.020f,1.046f,1.139f,1.328f,1.650f,2.080f,2.536f,3.376f,4.374f,
//4.236f,3.262f,2.493f,1.998f,1.565f,1.264f,1.099f,1.018f,1.000f,1.028f,1.114f,1.288f,1.609f,2.032f,2.504f,3.324f,4.316f,
//4.304f,3.322f,2.548f,2.051f,1.616f,1.303f,1.128f,1.041f,1.022f,1.047f,1.144f,1.329f,1.661f,2.099f,2.550f,3.390f,4.392f,
//4.508f,3.503f,2.662f,2.190f,1.746f,1.413f,1.225f,1.127f,1.104f,1.133f,1.241f,1.447f,1.796f,2.232f,2.693f,3.579f,4.607f,
//4.859f,3.813f,2.893f,2.419f,1.996f,1.646f,1.424f,1.305f,1.274f,1.313f,1.440f,1.684f,2.027f,2.438f,2.918f,3.899f,4.970f,
//5.371f,4.269f,3.417f,2.686f,2.326f,1.994f,1.756f,1.621f,1.579f,1.632f,1.776f,2.025f,2.346f,2.704f,3.492f,4.367f,5.497f,
//6.067f,4.892f,3.977f,3.278f,2.705f,2.423f,2.212f,2.071f,2.020f,2.083f,2.207f,2.430f,2.702f,3.344f,4.064f,5.005f,6.210f,
//6.976f,5.712f,4.720f,3.955f,3.381f,2.968f,2.690f,2.533f,2.486f,2.545f,2.716f,3.007f,3.438f,4.032f,4.821f,5.841f,7.139f, };
//
//
//static float tl84_lsc1[] = { 5.997f,4.958f,4.138f,3.502f,3.023f,2.675f,2.440f,2.306f,2.265f,2.313f,2.455f,2.697f,3.054f,3.545f,4.193f,5.028f,6.085f,
//5.245f,4.277f,3.518f,2.934f,2.393f,2.177f,2.003f,1.902f,1.882f,1.921f,2.029f,2.194f,2.429f,2.975f,3.571f,4.345f,5.332f,
//4.668f,3.757f,3.049f,2.396f,2.109f,1.852f,1.654f,1.537f,1.502f,1.547f,1.675f,1.869f,2.117f,2.419f,3.101f,3.824f,4.753f,
//4.243f,3.378f,2.564f,2.183f,1.853f,1.568f,1.374f,1.269f,1.236f,1.274f,1.384f,1.593f,1.884f,2.203f,2.610f,3.444f,4.328f,
//3.954f,3.120f,2.397f,2.018f,1.651f,1.371f,1.199f,1.114f,1.088f,1.120f,1.213f,1.395f,1.690f,2.050f,2.403f,3.186f,4.039f,
//3.787f,2.972f,2.317f,1.903f,1.533f,1.266f,1.114f,1.042f,1.020f,1.048f,1.128f,1.288f,1.569f,1.943f,2.333f,3.039f,3.873f,
//3.735f,2.926f,2.288f,1.859f,1.483f,1.232f,1.090f,1.019f,1.000f,1.025f,1.100f,1.257f,1.528f,1.909f,2.297f,2.995f,3.823f,
//3.795f,2.980f,2.324f,1.914f,1.531f,1.265f,1.122f,1.043f,1.021f,1.049f,1.130f,1.299f,1.579f,1.954f,2.344f,3.052f,3.888f,
//3.971f,3.136f,2.439f,2.040f,1.663f,1.377f,1.206f,1.119f,1.095f,1.129f,1.223f,1.409f,1.703f,2.064f,2.470f,3.212f,4.069f,
//4.270f,3.403f,2.626f,2.236f,1.873f,1.574f,1.382f,1.280f,1.245f,1.286f,1.400f,1.613f,1.918f,2.259f,2.671f,3.485f,4.375f,
//4.705f,3.792f,3.082f,2.470f,2.159f,1.877f,1.676f,1.550f,1.518f,1.561f,1.691f,1.916f,2.182f,2.490f,3.150f,3.881f,4.818f,
//5.294f,4.323f,3.562f,2.976f,2.478f,2.243f,2.078f,1.947f,1.910f,1.951f,2.078f,2.254f,2.481f,3.034f,3.638f,4.421f,5.418f,
//6.060f,5.018f,4.195f,3.557f,3.076f,2.727f,2.492f,2.358f,2.318f,2.369f,2.514f,2.761f,3.125f,3.623f,4.280f,5.126f,6.196f, };
//
//static float tl84_lsc2[] = { 5.687f,4.721f,3.957f,3.364f,2.916f,2.591f,2.371f,2.247f,2.209f,2.256f,2.392f,2.622f,2.961f,3.425f,4.036f,4.821f,5.813f,
//4.978f,4.077f,3.370f,2.825f,2.317f,2.105f,1.939f,1.843f,1.824f,1.872f,1.978f,2.161f,2.374f,2.883f,3.447f,4.176f,5.102f,
//4.432f,3.585f,2.924f,2.320f,2.054f,1.798f,1.615f,1.504f,1.467f,1.522f,1.643f,1.844f,2.077f,2.369f,3.000f,3.683f,4.557f,
//4.030f,3.225f,2.463f,2.119f,1.796f,1.543f,1.348f,1.242f,1.217f,1.259f,1.370f,1.569f,1.840f,2.146f,2.530f,3.323f,4.155f,
//3.755f,2.979f,2.304f,1.950f,1.608f,1.349f,1.182f,1.101f,1.077f,1.113f,1.197f,1.381f,1.662f,1.992f,2.335f,3.078f,3.882f,
//3.595f,2.837f,2.217f,1.840f,1.497f,1.240f,1.100f,1.031f,1.017f,1.044f,1.120f,1.277f,1.549f,1.893f,2.255f,2.939f,3.725f,
//3.543f,2.792f,2.183f,1.789f,1.448f,1.207f,1.071f,1.015f,1.000f,1.029f,1.097f,1.242f,1.500f,1.854f,2.217f,2.897f,3.679f,
//3.597f,2.840f,2.218f,1.845f,1.490f,1.244f,1.103f,1.036f,1.018f,1.046f,1.123f,1.285f,1.554f,1.906f,2.272f,2.951f,3.740f,
//3.759f,2.985f,2.321f,1.957f,1.607f,1.350f,1.185f,1.105f,1.086f,1.122f,1.212f,1.382f,1.682f,2.014f,2.387f,3.103f,3.911f,
//4.037f,3.233f,2.512f,2.143f,1.812f,1.540f,1.352f,1.252f,1.220f,1.263f,1.384f,1.584f,1.873f,2.194f,2.573f,3.361f,4.201f,
//4.442f,3.597f,2.938f,2.367f,2.085f,1.826f,1.627f,1.513f,1.483f,1.532f,1.655f,1.879f,2.124f,2.430f,3.047f,3.738f,4.621f,
//4.991f,4.093f,3.388f,2.845f,2.382f,2.155f,1.994f,1.871f,1.833f,1.892f,2.003f,2.176f,2.423f,2.937f,3.509f,4.248f,5.187f,
//5.704f,4.742f,3.981f,3.390f,2.944f,2.621f,2.404f,2.282f,2.248f,2.299f,2.439f,2.676f,3.022f,3.495f,4.117f,4.915f,5.922f, };
//
//
//static float high_lsc0[] = { 9.443f,7.570f,6.116f,5.009f,4.188f,3.604f,3.217f,3.000f,2.938f,3.025f,3.269f,3.686f,4.307f,5.172f,6.332f,7.850f,9.802f,
//8.124f,6.394f,5.065f,4.063f,3.085f,2.780f,2.529f,2.349f,2.303f,2.384f,2.575f,2.859f,3.183f,4.212f,5.265f,6.657f,8.463f,
//7.121f,5.509f,4.280f,3.135f,2.713f,2.295f,1.979f,1.808f,1.749f,1.830f,2.033f,2.364f,2.776f,3.223f,4.468f,5.757f,7.444f,
//6.390f,4.868f,3.383f,2.836f,2.306f,1.856f,1.562f,1.400f,1.353f,1.423f,1.604f,1.934f,2.409f,2.928f,3.516f,5.105f,6.701f,
//5.895f,4.437f,3.171f,2.591f,2.002f,1.567f,1.297f,1.166f,1.135f,1.185f,1.338f,1.629f,2.107f,2.707f,3.231f,4.668f,6.199f,
//5.612f,4.193f,3.049f,2.415f,1.811f,1.397f,1.165f,1.053f,1.026f,1.076f,1.209f,1.473f,1.918f,2.530f,3.139f,4.421f,5.914f,
//5.527f,4.119f,2.993f,2.347f,1.748f,1.350f,1.130f,1.024f,1.000f,1.046f,1.171f,1.427f,1.860f,2.467f,3.084f,4.350f,5.832f,
//5.635f,4.213f,3.063f,2.421f,1.820f,1.409f,1.173f,1.066f,1.039f,1.083f,1.220f,1.486f,1.938f,2.558f,3.167f,4.450f,5.948f,
//5.943f,4.480f,3.256f,2.634f,2.021f,1.578f,1.315f,1.184f,1.153f,1.206f,1.363f,1.655f,2.135f,2.749f,3.377f,4.728f,6.269f,
//6.465f,4.935f,3.525f,2.941f,2.364f,1.892f,1.586f,1.427f,1.382f,1.450f,1.636f,1.985f,2.482f,3.033f,3.633f,5.199f,6.810f,
//7.227f,5.604f,4.367f,3.293f,2.811f,2.359f,2.037f,1.841f,1.790f,1.868f,2.091f,2.446f,2.898f,3.389f,4.583f,5.890f,7.598f,
//8.265f,6.523f,5.182f,4.171f,3.289f,2.915f,2.623f,2.440f,2.381f,2.472f,2.677f,2.976f,3.331f,4.349f,5.421f,6.836f,8.668f,
//9.626f,7.738f,6.271f,5.153f,4.323f,3.732f,3.341f,3.123f,3.062f,3.154f,3.405f,3.835f,4.471f,5.354f,6.538f,8.084f,10.067f, };
//
//
//static float high_lsc1[] = { 6.461f,5.307f,4.400f,3.701f,3.176f,2.798f,2.546f,2.404f,2.365f,2.425f,2.588f,2.865f,3.271f,3.829f,4.567f,5.521f,6.732f,
//5.634f,4.559f,3.722f,3.082f,2.470f,2.230f,2.051f,1.945f,1.916f,1.969f,2.099f,2.290f,2.548f,3.198f,3.876f,4.758f,5.886f,
//5.001f,3.992f,3.211f,2.500f,2.182f,1.905f,1.690f,1.569f,1.528f,1.590f,1.738f,1.962f,2.251f,2.580f,3.354f,4.178f,5.239f,
//4.537f,3.579f,2.680f,2.276f,1.912f,1.608f,1.401f,1.286f,1.254f,1.301f,1.434f,1.660f,1.990f,2.343f,2.802f,3.755f,4.763f,
//4.222f,3.300f,2.504f,2.098f,1.701f,1.399f,1.213f,1.116f,1.093f,1.136f,1.246f,1.453f,1.778f,2.177f,2.556f,3.469f,4.441f,
//4.043f,3.142f,2.396f,1.963f,1.567f,1.285f,1.121f,1.040f,1.022f,1.058f,1.151f,1.336f,1.644f,2.059f,2.476f,3.306f,4.256f,
//3.991f,3.096f,2.365f,1.919f,1.520f,1.247f,1.089f,1.018f,1.000f,1.036f,1.122f,1.301f,1.605f,2.021f,2.436f,3.259f,4.203f,
//4.063f,3.160f,2.410f,1.977f,1.573f,1.291f,1.129f,1.049f,1.029f,1.062f,1.158f,1.346f,1.656f,2.071f,2.497f,3.324f,4.277f,
//4.264f,3.336f,2.543f,2.125f,1.714f,1.414f,1.230f,1.137f,1.114f,1.151f,1.266f,1.471f,1.801f,2.213f,2.644f,3.505f,4.482f,
//4.601f,3.636f,2.764f,2.345f,1.957f,1.639f,1.427f,1.310f,1.280f,1.328f,1.457f,1.696f,2.038f,2.425f,2.864f,3.812f,4.827f,
//5.090f,4.072f,3.283f,2.600f,2.272f,1.959f,1.737f,1.602f,1.567f,1.625f,1.773f,2.018f,2.326f,2.672f,3.426f,4.258f,5.328f,
//5.753f,4.667f,3.819f,3.170f,2.593f,2.335f,2.140f,2.016f,1.982f,2.034f,2.174f,2.374f,2.632f,3.286f,3.973f,4.865f,6.005f,
//6.614f,5.446f,4.526f,3.817f,3.283f,2.899f,2.642f,2.497f,2.457f,2.518f,2.684f,2.965f,3.378f,3.945f,4.694f,5.660f,6.884f, };
//
//static float high_lsc2[] = { 5.725f,4.745f,3.971f,3.372f,2.921f,2.594f,2.376f,2.253f,2.220f,2.273f,2.416f,2.658f,3.011f,3.494f,4.129f,4.947f,5.978f,
//5.006f,4.092f,3.376f,2.826f,2.303f,2.094f,1.931f,1.824f,1.813f,1.866f,1.992f,2.160f,2.401f,2.939f,3.524f,4.282f,5.246f,
//4.454f,3.595f,2.927f,2.333f,2.041f,1.794f,1.609f,1.492f,1.464f,1.518f,1.654f,1.858f,2.105f,2.415f,3.066f,3.776f,4.684f,
//4.049f,3.232f,2.471f,2.120f,1.801f,1.533f,1.346f,1.239f,1.215f,1.260f,1.379f,1.587f,1.878f,2.192f,2.587f,3.406f,4.271f,
//3.773f,2.986f,2.312f,1.951f,1.605f,1.340f,1.173f,1.094f,1.074f,1.115f,1.206f,1.398f,1.682f,2.035f,2.384f,3.155f,3.990f,
//3.615f,2.846f,2.211f,1.828f,1.483f,1.237f,1.094f,1.030f,1.017f,1.046f,1.127f,1.289f,1.565f,1.917f,2.288f,3.013f,3.830f,
//3.567f,2.804f,2.174f,1.779f,1.438f,1.197f,1.069f,1.013f,1.000f,1.030f,1.103f,1.255f,1.521f,1.878f,2.249f,2.971f,3.783f,
//3.627f,2.857f,2.219f,1.830f,1.486f,1.235f,1.100f,1.038f,1.024f,1.052f,1.136f,1.298f,1.567f,1.934f,2.297f,3.029f,3.848f,
//3.799f,3.010f,2.347f,1.971f,1.620f,1.352f,1.193f,1.112f,1.095f,1.129f,1.229f,1.409f,1.701f,2.062f,2.442f,3.188f,4.027f,
//4.089f,3.269f,2.548f,2.169f,1.834f,1.554f,1.364f,1.260f,1.237f,1.283f,1.402f,1.616f,1.913f,2.256f,2.657f,3.457f,4.329f,
//4.510f,3.647f,2.974f,2.402f,2.106f,1.838f,1.636f,1.520f,1.495f,1.542f,1.678f,1.904f,2.177f,2.495f,3.129f,3.847f,4.765f,
//5.080f,4.161f,3.441f,2.887f,2.385f,2.156f,1.988f,1.876f,1.833f,1.892f,2.019f,2.210f,2.444f,3.015f,3.609f,4.378f,5.353f,
//5.821f,4.834f,4.055f,3.452f,2.996f,2.667f,2.447f,2.324f,2.292f,2.347f,2.495f,2.742f,3.102f,3.594f,4.240f,5.070f,6.116f, };

//上面是大图 下面for小图

static float A_lsc0[] =  {2.615f, 2.343f, 2.07f, 1.892f, 1.714f, 1.618f, 1.521f, 1.494f, 1.467f, 1.502f, 1.537f, 1.637f, 1.737f, 1.926f, 2.116f, 2.388f, 2.661f,
2.412f, 2.145f, 1.878f, 1.712f, 1.546f, 1.46f, 1.374f, 1.35f, 1.326f, 1.357f, 1.388f, 1.479f, 1.569f, 1.748f, 1.926f, 2.197f, 2.467f,
2.208f, 1.948f, 1.687f, 1.533f, 1.379f, 1.302f, 1.226f, 1.205f, 1.184f, 1.212f, 1.24f, 1.32f, 1.401f, 1.568f, 1.736f, 2.005f, 2.273f,
2.082f, 1.832f, 1.583f, 1.438f, 1.293f, 1.223f, 1.152f, 1.134f, 1.114f, 1.14f, 1.166f, 1.242f, 1.318f, 1.474f, 1.632f, 1.893f, 2.154f,
1.956f, 1.718f, 1.479f, 1.343f, 1.207f, 1.143f, 1.079f, 1.062f, 1.045f, 1.068f, 1.092f, 1.163f, 1.234f, 1.38f, 1.527f, 1.781f, 2.035f,
1.916f, 1.679f, 1.443f, 1.311f, 1.178f, 1.116f, 1.054f, 1.038f, 1.022f, 1.046f, 1.07f, 1.139f, 1.208f, 1.351f, 1.494f, 1.745f, 1.996f,
1.875f, 1.641f, 1.407f, 1.278f, 1.15f, 1.09f, 1.03f, 1.015f, 1.0f, 1.023f, 1.047f, 1.115f, 1.183f, 1.322f, 1.461f, 1.708f, 1.956f,
1.912f, 1.674f, 1.436f, 1.304f, 1.172f, 1.111f, 1.049f, 1.033f, 1.017f, 1.041f, 1.064f, 1.134f, 1.204f, 1.348f, 1.49f, 1.743f, 1.996f,
1.95f, 1.708f, 1.466f, 1.33f, 1.195f, 1.132f, 1.068f, 1.051f, 1.034f, 1.058f, 1.082f, 1.154f, 1.226f, 1.373f, 1.52f, 1.778f, 2.035f,
2.062f, 1.811f, 1.56f, 1.415f, 1.271f, 1.202f, 1.134f, 1.114f, 1.095f, 1.122f, 1.148f, 1.226f, 1.303f, 1.459f, 1.616f, 1.884f, 2.152f,
2.174f, 1.914f, 1.653f, 1.5f, 1.346f, 1.272f, 1.199f, 1.178f, 1.156f, 1.186f, 1.215f, 1.297f, 1.38f, 1.546f, 1.711f, 1.99f, 2.268f,
2.374f, 2.102f, 1.831f, 1.665f, 1.498f, 1.415f, 1.331f, 1.308f, 1.285f, 1.317f, 1.348f, 1.44f, 1.532f, 1.713f, 1.893f, 2.174f, 2.456f,
2.574f, 2.292f, 2.009f, 1.83f, 1.651f, 1.557f, 1.463f, 1.438f, 1.414f, 1.448f, 1.482f, 1.584f, 1.685f, 1.88f, 2.075f, 2.36f, 2.644f};

static float A_lsc1[] = { 2.081f, 1.911f, 1.741f, 1.623f, 1.505f, 1.438f, 1.372f, 1.354f, 1.335f, 1.36f, 1.385f, 1.453f, 1.52f, 1.644f, 1.768f, 1.944f, 2.119f,
1.947f, 1.779f, 1.61f, 1.499f, 1.388f, 1.328f, 1.268f, 1.251f, 1.234f, 1.257f, 1.28f, 1.342f, 1.404f, 1.522f, 1.64f, 1.816f, 1.992f,
1.813f, 1.646f, 1.48f, 1.376f, 1.272f, 1.218f, 1.163f, 1.148f, 1.134f, 1.154f, 1.174f, 1.23f, 1.287f, 1.399f, 1.511f, 1.688f, 1.865f,
1.733f, 1.571f, 1.408f, 1.309f, 1.21f, 1.16f, 1.111f, 1.098f, 1.085f, 1.103f, 1.122f, 1.174f, 1.227f, 1.333f, 1.439f, 1.612f, 1.785f,
1.654f, 1.495f, 1.336f, 1.242f, 1.148f, 1.104f, 1.059f, 1.047f, 1.036f, 1.052f, 1.069f, 1.118f, 1.167f, 1.267f, 1.367f, 1.536f, 1.705f,
1.623f, 1.467f, 1.311f, 1.22f, 1.13f, 1.086f, 1.042f, 1.03f, 1.018f, 1.035f, 1.052f, 1.101f, 1.149f, 1.247f, 1.345f, 1.51f, 1.675f,
1.592f, 1.439f, 1.286f, 1.199f, 1.111f, 1.068f, 1.024f, 1.012f, 1.0f, 1.018f, 1.036f, 1.084f, 1.131f, 1.227f, 1.323f, 1.484f, 1.645f,
1.622f, 1.465f, 1.308f, 1.219f, 1.129f, 1.084f, 1.039f, 1.027f, 1.015f, 1.032f, 1.049f, 1.099f, 1.149f, 1.247f, 1.346f, 1.51f, 1.674f,
1.653f, 1.492f, 1.33f, 1.239f, 1.147f, 1.101f, 1.055f, 1.042f, 1.03f, 1.046f, 1.062f, 1.114f, 1.167f, 1.268f, 1.368f, 1.536f, 1.703f,
1.729f, 1.563f, 1.397f, 1.299f, 1.202f, 1.152f, 1.103f, 1.089f, 1.075f, 1.094f, 1.112f, 1.168f, 1.224f, 1.33f, 1.436f, 1.61f, 1.784f,
1.805f, 1.634f, 1.464f, 1.36f, 1.256f, 1.204f, 1.151f, 1.136f, 1.12f, 1.142f, 1.163f, 1.222f, 1.281f, 1.393f, 1.505f, 1.684f, 1.864f,
1.938f, 1.762f, 1.586f, 1.474f, 1.364f, 1.304f, 1.246f, 1.228f, 1.212f, 1.235f, 1.259f, 1.323f, 1.388f, 1.506f, 1.626f, 1.808f, 1.99f,
2.07f, 1.888f, 1.707f, 1.589f, 1.471f, 1.406f, 1.34f, 1.322f, 1.303f, 1.328f, 1.354f, 1.424f, 1.494f, 1.62f, 1.746f, 1.931f, 2.116f};


static float A_lsc2[] = { 2.017f, 1.854f, 1.692f, 1.585f, 1.478f, 1.412f, 1.347f, 1.329f, 1.311f, 1.339f, 1.367f, 1.434f, 1.501f, 1.622f, 1.744f, 1.91f, 2.076f,
1.891f, 1.73f, 1.57f, 1.466f, 1.363f, 1.305f, 1.247f, 1.232f, 1.216f, 1.242f, 1.266f, 1.328f, 1.388f, 1.502f, 1.616f, 1.785f, 1.954f,
1.765f, 1.606f, 1.447f, 1.348f, 1.248f, 1.198f, 1.147f, 1.134f, 1.122f, 1.144f, 1.166f, 1.221f, 1.276f, 1.382f, 1.489f, 1.66f, 1.831f,
1.686f, 1.531f, 1.377f, 1.283f, 1.19f, 1.144f, 1.099f, 1.088f, 1.078f, 1.097f, 1.117f, 1.168f, 1.219f, 1.319f, 1.419f, 1.586f, 1.753f,
1.606f, 1.457f, 1.307f, 1.219f, 1.131f, 1.091f, 1.051f, 1.042f, 1.033f, 1.05f, 1.068f, 1.114f, 1.161f, 1.255f, 1.349f, 1.512f, 1.675f,
1.58f, 1.431f, 1.282f, 1.197f, 1.113f, 1.074f, 1.034f, 1.025f, 1.016f, 1.033f, 1.05f, 1.097f, 1.144f, 1.236f, 1.329f, 1.49f, 1.65f,
1.553f, 1.405f, 1.257f, 1.176f, 1.095f, 1.056f, 1.018f, 1.009f, 1.0f, 1.016f, 1.032f, 1.079f, 1.126f, 1.217f, 1.309f, 1.467f, 1.625f,
1.582f, 1.431f, 1.281f, 1.199f, 1.116f, 1.075f, 1.033f, 1.024f, 1.015f, 1.032f, 1.048f, 1.096f, 1.144f, 1.239f, 1.333f, 1.492f, 1.651f,
1.61f, 1.458f, 1.305f, 1.221f, 1.138f, 1.093f, 1.048f, 1.039f, 1.03f, 1.047f, 1.065f, 1.114f, 1.163f, 1.26f, 1.357f, 1.517f, 1.677f,
1.683f, 1.526f, 1.37f, 1.279f, 1.188f, 1.141f, 1.094f, 1.084f, 1.073f, 1.092f, 1.112f, 1.166f, 1.22f, 1.323f, 1.425f, 1.59f, 1.756f,
1.756f, 1.595f, 1.434f, 1.336f, 1.239f, 1.19f, 1.14f, 1.128f, 1.116f, 1.137f, 1.158f, 1.218f, 1.278f, 1.386f, 1.493f, 1.664f, 1.835f,
1.878f, 1.715f, 1.551f, 1.446f, 1.342f, 1.286f, 1.229f, 1.216f, 1.202f, 1.226f, 1.25f, 1.314f, 1.378f, 1.494f, 1.61f, 1.784f, 1.959f,
2.0f, 1.834f, 1.668f, 1.556f, 1.445f, 1.382f, 1.319f, 1.303f, 1.287f, 1.314f, 1.342f, 1.41f, 1.477f, 1.602f, 1.726f, 1.904f, 2.083f};


static float cwf_lsc0[] = { 2.006f, 1.832f, 1.658f, 1.546f, 1.433f, 1.366f, 1.299f, 1.282f, 1.266f, 1.288f, 1.31f, 1.372f, 1.433f, 1.556f, 1.679f, 1.854f, 2.03f,
1.89f, 1.718f, 1.546f, 1.438f, 1.33f, 1.27f, 1.211f, 1.196f, 1.182f, 1.2f, 1.22f, 1.278f, 1.336f, 1.45f, 1.564f, 1.741f, 1.918f,
1.775f, 1.605f, 1.435f, 1.33f, 1.226f, 1.174f, 1.123f, 1.11f, 1.097f, 1.113f, 1.129f, 1.184f, 1.238f, 1.344f, 1.449f, 1.627f, 1.805f,
1.7f, 1.536f, 1.372f, 1.274f, 1.177f, 1.13f, 1.083f, 1.071f, 1.058f, 1.074f, 1.09f, 1.139f, 1.189f, 1.29f, 1.39f, 1.561f, 1.732f,
1.625f, 1.467f, 1.309f, 1.218f, 1.128f, 1.086f, 1.043f, 1.031f, 1.02f, 1.035f, 1.05f, 1.095f, 1.14f, 1.236f, 1.331f, 1.495f, 1.659f,
1.601f, 1.446f, 1.29f, 1.201f, 1.112f, 1.072f, 1.031f, 1.021f, 1.01f, 1.025f, 1.04f, 1.083f, 1.126f, 1.219f, 1.313f, 1.477f, 1.642f,
1.577f, 1.424f, 1.272f, 1.184f, 1.097f, 1.058f, 1.02f, 1.01f, 1.0f, 1.015f, 1.03f, 1.07f, 1.111f, 1.203f, 1.295f, 1.46f, 1.624f,
1.605f, 1.448f, 1.29f, 1.202f, 1.114f, 1.074f, 1.034f, 1.023f, 1.012f, 1.028f, 1.043f, 1.086f, 1.13f, 1.224f, 1.318f, 1.483f, 1.648f,
1.633f, 1.47f, 1.308f, 1.219f, 1.13f, 1.09f, 1.049f, 1.036f, 1.024f, 1.04f, 1.057f, 1.102f, 1.148f, 1.244f, 1.341f, 1.506f, 1.671f,
1.705f, 1.538f, 1.372f, 1.277f, 1.182f, 1.137f, 1.092f, 1.078f, 1.065f, 1.082f, 1.1f, 1.15f, 1.2f, 1.303f, 1.406f, 1.577f, 1.748f,
1.777f, 1.606f, 1.436f, 1.335f, 1.234f, 1.184f, 1.134f, 1.12f, 1.106f, 1.124f, 1.143f, 1.198f, 1.252f, 1.361f, 1.47f, 1.648f, 1.826f,
1.91f, 1.734f, 1.556f, 1.448f, 1.339f, 1.282f, 1.225f, 1.21f, 1.194f, 1.215f, 1.236f, 1.296f, 1.356f, 1.474f, 1.592f, 1.772f, 1.951f,
2.044f, 1.86f, 1.677f, 1.56f, 1.444f, 1.38f, 1.317f, 1.3f, 1.282f, 1.305f, 1.329f, 1.395f, 1.461f, 1.588f, 1.714f, 1.895f, 2.076f};


static float cwf_lsc1[] = { 1.883f, 1.736f, 1.589f, 1.487f, 1.385f, 1.331f, 1.277f, 1.258f, 1.239f, 1.259f, 1.279f, 1.336f, 1.392f, 1.498f, 1.605f, 1.755f, 1.905f,
1.78f, 1.634f, 1.49f, 1.392f, 1.294f, 1.245f, 1.196f, 1.179f, 1.162f, 1.18f, 1.199f, 1.252f, 1.304f, 1.405f, 1.506f, 1.657f, 1.808f,
1.676f, 1.533f, 1.39f, 1.297f, 1.204f, 1.16f, 1.115f, 1.1f, 1.084f, 1.102f, 1.119f, 1.168f, 1.216f, 1.312f, 1.408f, 1.56f, 1.711f,
1.616f, 1.474f, 1.333f, 1.247f, 1.162f, 1.12f, 1.078f, 1.065f, 1.052f, 1.067f, 1.082f, 1.127f, 1.172f, 1.262f, 1.352f, 1.501f, 1.65f,
1.556f, 1.416f, 1.276f, 1.198f, 1.119f, 1.08f, 1.041f, 1.03f, 1.02f, 1.033f, 1.046f, 1.087f, 1.128f, 1.212f, 1.296f, 1.442f, 1.589f,
1.532f, 1.394f, 1.257f, 1.181f, 1.106f, 1.069f, 1.032f, 1.021f, 1.01f, 1.023f, 1.036f, 1.075f, 1.114f, 1.198f, 1.281f, 1.426f, 1.571f,
1.508f, 1.373f, 1.238f, 1.165f, 1.092f, 1.058f, 1.024f, 1.012f, 1.0f, 1.013f, 1.026f, 1.064f, 1.101f, 1.184f, 1.267f, 1.41f, 1.553f,
1.531f, 1.394f, 1.257f, 1.182f, 1.107f, 1.072f, 1.036f, 1.025f, 1.013f, 1.026f, 1.038f, 1.077f, 1.116f, 1.202f, 1.287f, 1.431f, 1.575f,
1.555f, 1.416f, 1.277f, 1.2f, 1.122f, 1.086f, 1.049f, 1.038f, 1.026f, 1.038f, 1.05f, 1.091f, 1.132f, 1.22f, 1.307f, 1.452f, 1.597f,
1.62f, 1.477f, 1.334f, 1.25f, 1.167f, 1.126f, 1.086f, 1.074f, 1.062f, 1.076f, 1.09f, 1.136f, 1.182f, 1.272f, 1.361f, 1.512f, 1.664f,
1.685f, 1.538f, 1.39f, 1.301f, 1.212f, 1.168f, 1.123f, 1.11f, 1.097f, 1.113f, 1.129f, 1.18f, 1.232f, 1.324f, 1.415f, 1.572f, 1.73f,
1.8f, 1.646f, 1.494f, 1.4f, 1.306f, 1.256f, 1.206f, 1.191f, 1.176f, 1.195f, 1.214f, 1.268f, 1.323f, 1.423f, 1.523f, 1.682f, 1.84f,
1.914f, 1.756f, 1.597f, 1.498f, 1.4f, 1.344f, 1.288f, 1.272f, 1.256f, 1.277f, 1.298f, 1.356f, 1.414f, 1.522f, 1.631f, 1.79f, 1.95f};



static float cwf_lsc2[] = { 1.778f, 1.653f, 1.528f, 1.434f, 1.341f, 1.29f, 1.24f, 1.226f, 1.212f, 1.232f, 1.251f, 1.304f, 1.357f, 1.456f, 1.555f, 1.696f, 1.836f,
1.69f, 1.562f, 1.433f, 1.346f, 1.26f, 1.214f, 1.169f, 1.157f, 1.144f, 1.163f, 1.182f, 1.229f, 1.277f, 1.37f, 1.464f, 1.603f, 1.743f,
1.603f, 1.47f, 1.338f, 1.258f, 1.178f, 1.138f, 1.098f, 1.088f, 1.077f, 1.094f, 1.112f, 1.155f, 1.198f, 1.285f, 1.372f, 1.511f, 1.65f,
1.545f, 1.415f, 1.286f, 1.212f, 1.138f, 1.102f, 1.066f, 1.057f, 1.048f, 1.064f, 1.08f, 1.12f, 1.159f, 1.24f, 1.322f, 1.457f, 1.592f,
1.487f, 1.36f, 1.233f, 1.166f, 1.099f, 1.066f, 1.034f, 1.026f, 1.019f, 1.034f, 1.048f, 1.084f, 1.12f, 1.196f, 1.271f, 1.402f, 1.533f,
1.462f, 1.34f, 1.216f, 1.15f, 1.084f, 1.054f, 1.024f, 1.017f, 1.01f, 1.023f, 1.037f, 1.072f, 1.108f, 1.18f, 1.253f, 1.383f, 1.512f,
1.438f, 1.319f, 1.2f, 1.135f, 1.07f, 1.042f, 1.014f, 1.007f, 1.0f, 1.013f, 1.026f, 1.061f, 1.096f, 1.166f, 1.235f, 1.364f, 1.492f,
1.46f, 1.34f, 1.22f, 1.154f, 1.088f, 1.056f, 1.026f, 1.018f, 1.01f, 1.023f, 1.036f, 1.073f, 1.11f, 1.183f, 1.256f, 1.384f, 1.512f,
1.482f, 1.361f, 1.24f, 1.172f, 1.105f, 1.071f, 1.037f, 1.028f, 1.02f, 1.033f, 1.046f, 1.084f, 1.123f, 1.2f, 1.277f, 1.404f, 1.532f,
1.542f, 1.416f, 1.29f, 1.218f, 1.145f, 1.108f, 1.071f, 1.063f, 1.054f, 1.068f, 1.08f, 1.123f, 1.166f, 1.246f, 1.326f, 1.462f, 1.597f,
1.601f, 1.47f, 1.34f, 1.263f, 1.185f, 1.145f, 1.105f, 1.097f, 1.089f, 1.102f, 1.115f, 1.162f, 1.208f, 1.292f, 1.375f, 1.518f, 1.662f,
1.703f, 1.571f, 1.44f, 1.355f, 1.27f, 1.224f, 1.179f, 1.169f, 1.16f, 1.176f, 1.192f, 1.242f, 1.292f, 1.384f, 1.475f, 1.616f, 1.757f,
1.804f, 1.672f, 1.539f, 1.447f, 1.355f, 1.304f, 1.253f, 1.241f, 1.23f, 1.249f, 1.269f, 1.322f, 1.376f, 1.475f, 1.575f, 1.714f, 1.852f};


static float d65_lsc0[] = { 2.306f, 2.081f, 1.856f, 1.709f, 1.562f, 1.481f, 1.4f, 1.376f, 1.353f, 1.388f, 1.423f, 1.514f, 1.604f, 1.769f, 1.934f, 2.172f, 2.409f,
2.154f, 1.933f, 1.712f, 1.57f, 1.43f, 1.356f, 1.283f, 1.264f, 1.244f, 1.274f, 1.304f, 1.388f, 1.471f, 1.626f, 1.781f, 2.02f, 2.258f,
2.002f, 1.784f, 1.567f, 1.432f, 1.297f, 1.232f, 1.166f, 1.15f, 1.135f, 1.16f, 1.185f, 1.262f, 1.338f, 1.484f, 1.629f, 1.868f, 2.107f,
1.906f, 1.694f, 1.482f, 1.356f, 1.231f, 1.17f, 1.11f, 1.095f, 1.08f, 1.106f, 1.13f, 1.202f, 1.274f, 1.412f, 1.551f, 1.782f, 2.013f,
1.811f, 1.604f, 1.397f, 1.281f, 1.165f, 1.109f, 1.053f, 1.039f, 1.026f, 1.051f, 1.076f, 1.142f, 1.209f, 1.341f, 1.473f, 1.696f, 1.918f,
1.78f, 1.576f, 1.374f, 1.26f, 1.148f, 1.093f, 1.038f, 1.026f, 1.013f, 1.037f, 1.061f, 1.126f, 1.19f, 1.32f, 1.45f, 1.67f, 1.889f,
1.748f, 1.549f, 1.35f, 1.24f, 1.13f, 1.077f, 1.024f, 1.012f, 1.0f, 1.023f, 1.046f, 1.108f, 1.171f, 1.299f, 1.427f, 1.644f, 1.86f,
1.784f, 1.582f, 1.38f, 1.265f, 1.152f, 1.098f, 1.045f, 1.032f, 1.019f, 1.042f, 1.064f, 1.13f, 1.196f, 1.326f, 1.457f, 1.678f, 1.899f,
1.82f, 1.614f, 1.409f, 1.291f, 1.173f, 1.12f, 1.066f, 1.052f, 1.039f, 1.061f, 1.083f, 1.152f, 1.22f, 1.353f, 1.486f, 1.712f, 1.938f,
1.92f, 1.707f, 1.494f, 1.369f, 1.244f, 1.184f, 1.125f, 1.11f, 1.096f, 1.12f, 1.144f, 1.218f, 1.292f, 1.431f, 1.57f, 1.804f, 2.036f,
2.021f, 1.8f, 1.578f, 1.446f, 1.315f, 1.249f, 1.184f, 1.168f, 1.153f, 1.18f, 1.206f, 1.284f, 1.363f, 1.509f, 1.655f, 1.895f, 2.135f,
2.192f, 1.964f, 1.735f, 1.593f, 1.45f, 1.378f, 1.305f, 1.286f, 1.268f, 1.298f, 1.328f, 1.414f, 1.499f, 1.66f, 1.82f, 2.064f, 2.308f,
2.364f, 2.128f, 1.892f, 1.739f, 1.586f, 1.506f, 1.427f, 1.404f, 1.382f, 1.416f, 1.45f, 1.543f, 1.636f, 1.81f, 1.985f, 2.234f, 2.482f};


static float d65_lsc1[] = { 1.912f, 1.76f, 1.608f, 1.505f, 1.401f, 1.344f, 1.286f, 1.27f, 1.254f, 1.277f, 1.301f, 1.368f, 1.434f, 1.547f, 1.66f, 1.825f, 1.99f,
1.806f, 1.655f, 1.504f, 1.405f, 1.307f, 1.254f, 1.201f, 1.187f, 1.174f, 1.196f, 1.218f, 1.279f, 1.34f, 1.448f, 1.556f, 1.72f, 1.884f,
1.701f, 1.55f, 1.399f, 1.306f, 1.213f, 1.164f, 1.116f, 1.104f, 1.093f, 1.114f, 1.136f, 1.191f, 1.246f, 1.35f, 1.453f, 1.616f, 1.778f,
1.634f, 1.488f, 1.342f, 1.254f, 1.167f, 1.122f, 1.078f, 1.068f, 1.058f, 1.077f, 1.097f, 1.148f, 1.199f, 1.296f, 1.394f, 1.553f, 1.711f,
1.567f, 1.426f, 1.285f, 1.203f, 1.121f, 1.08f, 1.04f, 1.031f, 1.022f, 1.04f, 1.058f, 1.104f, 1.151f, 1.244f, 1.336f, 1.49f, 1.644f,
1.543f, 1.405f, 1.266f, 1.186f, 1.105f, 1.067f, 1.029f, 1.02f, 1.011f, 1.029f, 1.047f, 1.092f, 1.136f, 1.228f, 1.318f, 1.471f, 1.624f,
1.52f, 1.384f, 1.247f, 1.168f, 1.089f, 1.054f, 1.018f, 1.009f, 1.0f, 1.018f, 1.036f, 1.079f, 1.122f, 1.212f, 1.301f, 1.453f, 1.605f,
1.546f, 1.408f, 1.269f, 1.189f, 1.109f, 1.071f, 1.034f, 1.024f, 1.014f, 1.032f, 1.049f, 1.094f, 1.14f, 1.232f, 1.324f, 1.477f, 1.63f,
1.573f, 1.432f, 1.291f, 1.21f, 1.129f, 1.089f, 1.049f, 1.039f, 1.029f, 1.046f, 1.062f, 1.11f, 1.158f, 1.252f, 1.346f, 1.501f, 1.656f,
1.644f, 1.498f, 1.352f, 1.266f, 1.18f, 1.136f, 1.093f, 1.082f, 1.072f, 1.089f, 1.106f, 1.159f, 1.212f, 1.31f, 1.408f, 1.568f, 1.728f,
1.714f, 1.564f, 1.414f, 1.322f, 1.23f, 1.184f, 1.137f, 1.126f, 1.114f, 1.132f, 1.151f, 1.208f, 1.266f, 1.368f, 1.471f, 1.636f, 1.801f,
1.836f, 1.681f, 1.526f, 1.428f, 1.328f, 1.276f, 1.224f, 1.21f, 1.197f, 1.218f, 1.24f, 1.3f, 1.362f, 1.473f, 1.584f, 1.752f, 1.919f,
1.957f, 1.798f, 1.639f, 1.533f, 1.427f, 1.368f, 1.31f, 1.295f, 1.28f, 1.304f, 1.328f, 1.392f, 1.457f, 1.576f, 1.696f, 1.867f, 2.038f};


static float d65_lsc2[] = {1.801f, 1.667f, 1.533f, 1.44f, 1.346f, 1.292f, 1.239f, 1.227f, 1.215f, 1.238f, 1.26f, 1.32f, 1.379f, 1.483f, 1.587f, 1.732f, 1.878f,
1.703f, 1.57f, 1.436f, 1.348f, 1.26f, 1.213f, 1.166f, 1.156f, 1.144f, 1.166f, 1.188f, 1.24f, 1.292f, 1.392f, 1.492f, 1.636f, 1.78f,
1.605f, 1.473f, 1.34f, 1.256f, 1.173f, 1.134f, 1.094f, 1.084f, 1.074f, 1.094f, 1.115f, 1.16f, 1.206f, 1.302f, 1.398f, 1.54f, 1.682f,
1.544f, 1.416f, 1.288f, 1.211f, 1.134f, 1.098f, 1.062f, 1.054f, 1.046f, 1.063f, 1.08f, 1.124f, 1.166f, 1.255f, 1.344f, 1.484f, 1.624f,
1.483f, 1.36f, 1.237f, 1.166f, 1.094f, 1.062f, 1.03f, 1.023f, 1.017f, 1.031f, 1.046f, 1.086f, 1.127f, 1.208f, 1.289f, 1.427f, 1.565f,
1.461f, 1.339f, 1.217f, 1.149f, 1.082f, 1.051f, 1.022f, 1.015f, 1.008f, 1.023f, 1.038f, 1.076f, 1.115f, 1.193f, 1.272f, 1.408f, 1.543f,
1.438f, 1.318f, 1.197f, 1.133f, 1.069f, 1.041f, 1.013f, 1.006f, 1.0f, 1.015f, 1.03f, 1.066f, 1.103f, 1.179f, 1.255f, 1.388f, 1.521f,
1.462f, 1.339f, 1.216f, 1.15f, 1.084f, 1.055f, 1.026f, 1.019f, 1.012f, 1.026f, 1.041f, 1.08f, 1.12f, 1.198f, 1.276f, 1.41f, 1.544f,
1.486f, 1.36f, 1.235f, 1.168f, 1.1f, 1.069f, 1.038f, 1.031f, 1.024f, 1.038f, 1.052f, 1.094f, 1.136f, 1.217f, 1.298f, 1.432f, 1.567f,
1.553f, 1.423f, 1.294f, 1.22f, 1.146f, 1.111f, 1.075f, 1.067f, 1.06f, 1.075f, 1.09f, 1.136f, 1.182f, 1.268f, 1.354f, 1.494f, 1.634f,
1.62f, 1.486f, 1.352f, 1.272f, 1.193f, 1.152f, 1.112f, 1.104f, 1.095f, 1.112f, 1.129f, 1.179f, 1.229f, 1.319f, 1.409f, 1.555f, 1.701f,
1.727f, 1.59f, 1.453f, 1.366f, 1.279f, 1.232f, 1.186f, 1.176f, 1.166f, 1.186f, 1.206f, 1.261f, 1.316f, 1.414f, 1.513f, 1.66f, 1.807f,
1.834f, 1.694f, 1.554f, 1.459f, 1.364f, 1.312f, 1.26f, 1.248f, 1.237f, 1.26f, 1.283f, 1.342f, 1.402f, 1.509f, 1.616f, 1.764f, 1.913f};

static float high_lsc0[] = { 2.306f, 2.081f, 1.856f, 1.709f, 1.562f, 1.481f, 1.4f, 1.376f, 1.353f, 1.388f, 1.423f, 1.514f, 1.604f, 1.769f, 1.934f, 2.172f, 2.409f,
2.154f, 1.933f, 1.712f, 1.57f, 1.43f, 1.356f, 1.283f, 1.264f, 1.244f, 1.274f, 1.304f, 1.388f, 1.471f, 1.626f, 1.781f, 2.02f, 2.258f,
2.002f, 1.784f, 1.567f, 1.432f, 1.297f, 1.232f, 1.166f, 1.15f, 1.135f, 1.16f, 1.185f, 1.262f, 1.338f, 1.484f, 1.629f, 1.868f, 2.107f,
1.906f, 1.694f, 1.482f, 1.356f, 1.231f, 1.17f, 1.11f, 1.095f, 1.08f, 1.106f, 1.13f, 1.202f, 1.274f, 1.412f, 1.551f, 1.782f, 2.013f,
1.811f, 1.604f, 1.397f, 1.281f, 1.165f, 1.109f, 1.053f, 1.039f, 1.026f, 1.051f, 1.076f, 1.142f, 1.209f, 1.341f, 1.473f, 1.696f, 1.918f,
1.78f, 1.576f, 1.374f, 1.26f, 1.148f, 1.093f, 1.038f, 1.026f, 1.013f, 1.037f, 1.061f, 1.126f, 1.19f, 1.32f, 1.45f, 1.67f, 1.889f,
1.748f, 1.549f, 1.35f, 1.24f, 1.13f, 1.077f, 1.024f, 1.012f, 1.0f, 1.023f, 1.046f, 1.108f, 1.171f, 1.299f, 1.427f, 1.644f, 1.86f,
1.784f, 1.582f, 1.38f, 1.265f, 1.152f, 1.098f, 1.045f, 1.032f, 1.019f, 1.042f, 1.064f, 1.13f, 1.196f, 1.326f, 1.457f, 1.678f, 1.899f,
1.82f, 1.614f, 1.409f, 1.291f, 1.173f, 1.12f, 1.066f, 1.052f, 1.039f, 1.061f, 1.083f, 1.152f, 1.22f, 1.353f, 1.486f, 1.712f, 1.938f,
1.92f, 1.707f, 1.494f, 1.369f, 1.244f, 1.184f, 1.125f, 1.11f, 1.096f, 1.12f, 1.144f, 1.218f, 1.292f, 1.431f, 1.57f, 1.804f, 2.036f,
2.021f, 1.8f, 1.578f, 1.446f, 1.315f, 1.249f, 1.184f, 1.168f, 1.153f, 1.18f, 1.206f, 1.284f, 1.363f, 1.509f, 1.655f, 1.895f, 2.135f,
2.192f, 1.964f, 1.735f, 1.593f, 1.45f, 1.378f, 1.305f, 1.286f, 1.268f, 1.298f, 1.328f, 1.414f, 1.499f, 1.66f, 1.82f, 2.064f, 2.308f,
2.364f, 2.128f, 1.892f, 1.739f, 1.586f, 1.506f, 1.427f, 1.404f, 1.382f, 1.416f, 1.45f, 1.543f, 1.636f, 1.81f, 1.985f, 2.234f, 2.482f };

static float high_lsc1[] = { 1.912f, 1.76f, 1.608f, 1.505f, 1.401f, 1.344f, 1.286f, 1.27f, 1.254f, 1.277f, 1.301f, 1.368f, 1.434f, 1.547f, 1.66f, 1.825f, 1.99f,
1.806f, 1.655f, 1.504f, 1.405f, 1.307f, 1.254f, 1.201f, 1.187f, 1.174f, 1.196f, 1.218f, 1.279f, 1.34f, 1.448f, 1.556f, 1.72f, 1.884f,
1.701f, 1.55f, 1.399f, 1.306f, 1.213f, 1.164f, 1.116f, 1.104f, 1.093f, 1.114f, 1.136f, 1.191f, 1.246f, 1.35f, 1.453f, 1.616f, 1.778f,
1.634f, 1.488f, 1.342f, 1.254f, 1.167f, 1.122f, 1.078f, 1.068f, 1.058f, 1.077f, 1.097f, 1.148f, 1.199f, 1.296f, 1.394f, 1.553f, 1.711f,
1.567f, 1.426f, 1.285f, 1.203f, 1.121f, 1.08f, 1.04f, 1.031f, 1.022f, 1.04f, 1.058f, 1.104f, 1.151f, 1.244f, 1.336f, 1.49f, 1.644f,
1.543f, 1.405f, 1.266f, 1.186f, 1.105f, 1.067f, 1.029f, 1.02f, 1.011f, 1.029f, 1.047f, 1.092f, 1.136f, 1.228f, 1.318f, 1.471f, 1.624f,
1.52f, 1.384f, 1.247f, 1.168f, 1.089f, 1.054f, 1.018f, 1.009f, 1.0f, 1.018f, 1.036f, 1.079f, 1.122f, 1.212f, 1.301f, 1.453f, 1.605f,
1.546f, 1.408f, 1.269f, 1.189f, 1.109f, 1.071f, 1.034f, 1.024f, 1.014f, 1.032f, 1.049f, 1.094f, 1.14f, 1.232f, 1.324f, 1.477f, 1.63f,
1.573f, 1.432f, 1.291f, 1.21f, 1.129f, 1.089f, 1.049f, 1.039f, 1.029f, 1.046f, 1.062f, 1.11f, 1.158f, 1.252f, 1.346f, 1.501f, 1.656f,
1.644f, 1.498f, 1.352f, 1.266f, 1.18f, 1.136f, 1.093f, 1.082f, 1.072f, 1.089f, 1.106f, 1.159f, 1.212f, 1.31f, 1.408f, 1.568f, 1.728f,
1.714f, 1.564f, 1.414f, 1.322f, 1.23f, 1.184f, 1.137f, 1.126f, 1.114f, 1.132f, 1.151f, 1.208f, 1.266f, 1.368f, 1.471f, 1.636f, 1.801f,
1.836f, 1.681f, 1.526f, 1.428f, 1.328f, 1.276f, 1.224f, 1.21f, 1.197f, 1.218f, 1.24f, 1.3f, 1.362f, 1.473f, 1.584f, 1.752f, 1.919f,
1.957f, 1.798f, 1.639f, 1.533f, 1.427f, 1.368f, 1.31f, 1.295f, 1.28f, 1.304f, 1.328f, 1.392f, 1.457f, 1.576f, 1.696f, 1.867f, 2.038f };

static float high_lsc2[] = { 1.801f, 1.667f, 1.533f, 1.44f, 1.346f, 1.292f, 1.239f, 1.227f, 1.215f, 1.238f, 1.26f, 1.32f, 1.379f, 1.483f, 1.587f, 1.732f, 1.878f,
1.703f, 1.57f, 1.436f, 1.348f, 1.26f, 1.213f, 1.166f, 1.156f, 1.144f, 1.166f, 1.188f, 1.24f, 1.292f, 1.392f, 1.492f, 1.636f, 1.78f,
1.605f, 1.473f, 1.34f, 1.256f, 1.173f, 1.134f, 1.094f, 1.084f, 1.074f, 1.094f, 1.115f, 1.16f, 1.206f, 1.302f, 1.398f, 1.54f, 1.682f,
1.544f, 1.416f, 1.288f, 1.211f, 1.134f, 1.098f, 1.062f, 1.054f, 1.046f, 1.063f, 1.08f, 1.124f, 1.166f, 1.255f, 1.344f, 1.484f, 1.624f,
1.483f, 1.36f, 1.237f, 1.166f, 1.094f, 1.062f, 1.03f, 1.023f, 1.017f, 1.031f, 1.046f, 1.086f, 1.127f, 1.208f, 1.289f, 1.427f, 1.565f,
1.461f, 1.339f, 1.217f, 1.149f, 1.082f, 1.051f, 1.022f, 1.015f, 1.008f, 1.023f, 1.038f, 1.076f, 1.115f, 1.193f, 1.272f, 1.408f, 1.543f,
1.438f, 1.318f, 1.197f, 1.133f, 1.069f, 1.041f, 1.013f, 1.006f, 1.0f, 1.015f, 1.03f, 1.066f, 1.103f, 1.179f, 1.255f, 1.388f, 1.521f,
1.462f, 1.339f, 1.216f, 1.15f, 1.084f, 1.055f, 1.026f, 1.019f, 1.012f, 1.026f, 1.041f, 1.08f, 1.12f, 1.198f, 1.276f, 1.41f, 1.544f,
1.486f, 1.36f, 1.235f, 1.168f, 1.1f, 1.069f, 1.038f, 1.031f, 1.024f, 1.038f, 1.052f, 1.094f, 1.136f, 1.217f, 1.298f, 1.432f, 1.567f,
1.553f, 1.423f, 1.294f, 1.22f, 1.146f, 1.111f, 1.075f, 1.067f, 1.06f, 1.075f, 1.09f, 1.136f, 1.182f, 1.268f, 1.354f, 1.494f, 1.634f,
1.62f, 1.486f, 1.352f, 1.272f, 1.193f, 1.152f, 1.112f, 1.104f, 1.095f, 1.112f, 1.129f, 1.179f, 1.229f, 1.319f, 1.409f, 1.555f, 1.701f,
1.727f, 1.59f, 1.453f, 1.366f, 1.279f, 1.232f, 1.186f, 1.176f, 1.166f, 1.186f, 1.206f, 1.261f, 1.316f, 1.414f, 1.513f, 1.66f, 1.807f,
1.834f, 1.694f, 1.554f, 1.459f, 1.364f, 1.312f, 1.26f, 1.248f, 1.237f, 1.26f, 1.283f, 1.342f, 1.402f, 1.509f, 1.616f, 1.764f, 1.913f };

static float tl84_lsc2[] = { 1.796f, 1.67f, 1.543f, 1.446f, 1.348f, 1.295f, 1.242f, 1.23f, 1.217f, 1.238f, 1.259f, 1.314f, 1.37f, 1.47f, 1.569f, 1.704f, 1.84f,
1.702f, 1.574f, 1.446f, 1.356f, 1.265f, 1.218f, 1.172f, 1.159f, 1.147f, 1.166f, 1.186f, 1.235f, 1.284f, 1.379f, 1.475f, 1.613f, 1.751f,
1.608f, 1.478f, 1.349f, 1.265f, 1.182f, 1.142f, 1.101f, 1.089f, 1.077f, 1.095f, 1.113f, 1.155f, 1.197f, 1.289f, 1.381f, 1.522f, 1.662f,
1.553f, 1.424f, 1.294f, 1.218f, 1.141f, 1.104f, 1.066f, 1.056f, 1.047f, 1.063f, 1.078f, 1.118f, 1.158f, 1.244f, 1.329f, 1.467f, 1.606f,
1.497f, 1.368f, 1.24f, 1.17f, 1.1f, 1.066f, 1.031f, 1.024f, 1.017f, 1.03f, 1.044f, 1.082f, 1.12f, 1.199f, 1.277f, 1.413f, 1.549f,
1.473f, 1.348f, 1.224f, 1.154f, 1.086f, 1.054f, 1.023f, 1.016f, 1.008f, 1.022f, 1.036f, 1.072f, 1.108f, 1.184f, 1.26f, 1.392f, 1.524f,
1.448f, 1.328f, 1.207f, 1.139f, 1.071f, 1.043f, 1.015f, 1.007f, 1.0f, 1.014f, 1.029f, 1.063f, 1.097f, 1.17f, 1.242f, 1.371f, 1.5f,
1.469f, 1.347f, 1.226f, 1.156f, 1.087f, 1.056f, 1.026f, 1.017f, 1.009f, 1.023f, 1.038f, 1.074f, 1.11f, 1.187f, 1.264f, 1.395f, 1.527f,
1.49f, 1.367f, 1.244f, 1.174f, 1.103f, 1.07f, 1.036f, 1.027f, 1.018f, 1.032f, 1.046f, 1.084f, 1.123f, 1.204f, 1.285f, 1.42f, 1.554f,
1.548f, 1.423f, 1.297f, 1.22f, 1.144f, 1.107f, 1.07f, 1.061f, 1.052f, 1.068f, 1.084f, 1.126f, 1.168f, 1.25f, 1.334f, 1.476f, 1.618f,
1.607f, 1.478f, 1.35f, 1.268f, 1.185f, 1.145f, 1.105f, 1.096f, 1.086f, 1.104f, 1.122f, 1.167f, 1.212f, 1.297f, 1.382f, 1.532f, 1.682f,
1.71f, 1.577f, 1.445f, 1.357f, 1.268f, 1.224f, 1.178f, 1.166f, 1.153f, 1.173f, 1.192f, 1.245f, 1.298f, 1.39f, 1.483f, 1.63f, 1.777f,
1.812f, 1.676f, 1.54f, 1.446f, 1.352f, 1.302f, 1.252f, 1.236f, 1.22f, 1.241f, 1.263f, 1.324f, 1.384f, 1.484f, 1.584f, 1.728f, 1.873f };

static float tl84_lsc1[] = {1.853f, 1.711f, 1.568f, 1.471f, 1.374f, 1.322f, 1.269f, 1.252f, 1.236f, 1.255f, 1.274f, 1.329f, 1.384f, 1.488f, 1.593f, 1.738f, 1.884f,
1.752f, 1.611f, 1.47f, 1.378f, 1.287f, 1.239f, 1.192f, 1.177f, 1.162f, 1.18f, 1.197f, 1.248f, 1.298f, 1.396f, 1.494f, 1.64f, 1.787f,
1.651f, 1.511f, 1.371f, 1.285f, 1.199f, 1.156f, 1.114f, 1.101f, 1.088f, 1.104f, 1.12f, 1.166f, 1.213f, 1.304f, 1.395f, 1.542f, 1.69f,
1.592f, 1.455f, 1.318f, 1.238f, 1.156f, 1.117f, 1.078f, 1.066f, 1.054f, 1.069f, 1.084f, 1.127f, 1.17f, 1.256f, 1.342f, 1.486f, 1.63f,
1.533f, 1.4f, 1.266f, 1.19f, 1.114f, 1.078f, 1.042f, 1.031f, 1.02f, 1.034f, 1.048f, 1.088f, 1.128f, 1.208f, 1.288f, 1.428f, 1.569f,
1.508f, 1.378f, 1.249f, 1.176f, 1.102f, 1.066f, 1.03f, 1.02f, 1.01f, 1.023f, 1.036f, 1.075f, 1.114f, 1.193f, 1.272f, 1.41f, 1.548f,
1.483f, 1.358f, 1.232f, 1.161f, 1.09f, 1.054f, 1.019f, 1.01f, 1.0f, 1.012f, 1.025f, 1.062f, 1.1f, 1.178f, 1.257f, 1.392f, 1.528f,
1.507f, 1.378f, 1.248f, 1.177f, 1.106f, 1.068f, 1.031f, 1.021f, 1.01f, 1.024f, 1.037f, 1.076f, 1.115f, 1.196f, 1.278f, 1.416f, 1.554f,
1.531f, 1.398f, 1.265f, 1.194f, 1.122f, 1.082f, 1.043f, 1.032f, 1.021f, 1.035f, 1.049f, 1.09f, 1.13f, 1.214f, 1.299f, 1.439f, 1.579f,
1.597f, 1.459f, 1.321f, 1.243f, 1.164f, 1.122f, 1.081f, 1.07f, 1.058f, 1.074f, 1.089f, 1.133f, 1.176f, 1.265f, 1.354f, 1.498f, 1.641f,
1.663f, 1.52f, 1.377f, 1.292f, 1.206f, 1.162f, 1.119f, 1.107f, 1.095f, 1.112f, 1.129f, 1.176f, 1.223f, 1.316f, 1.409f, 1.556f, 1.703f,
1.768f, 1.622f, 1.476f, 1.385f, 1.294f, 1.247f, 1.2f, 1.185f, 1.17f, 1.189f, 1.208f, 1.26f, 1.312f, 1.411f, 1.511f, 1.661f, 1.81f,
1.873f, 1.724f, 1.574f, 1.478f, 1.382f, 1.331f, 1.28f, 1.263f, 1.245f, 1.266f, 1.286f, 1.343f, 1.4f, 1.506f, 1.613f, 1.765f, 1.918f};

static float tl84_lsc0[] = {1.979f, 1.813f, 1.647f, 1.532f, 1.418f, 1.358f, 1.298f, 1.28f, 1.261f, 1.283f, 1.305f, 1.368f, 1.432f, 1.546f, 1.659f, 1.827f, 1.995f,
1.864f, 1.699f, 1.534f, 1.428f, 1.321f, 1.266f, 1.211f, 1.196f, 1.18f, 1.199f, 1.217f, 1.275f, 1.332f, 1.441f, 1.55f, 1.719f, 1.889f,
1.75f, 1.586f, 1.421f, 1.322f, 1.224f, 1.174f, 1.124f, 1.112f, 1.099f, 1.114f, 1.13f, 1.181f, 1.232f, 1.336f, 1.44f, 1.612f, 1.783f,
1.682f, 1.522f, 1.362f, 1.268f, 1.174f, 1.128f, 1.082f, 1.07f, 1.06f, 1.074f, 1.088f, 1.137f, 1.186f, 1.285f, 1.384f, 1.55f, 1.716f,
1.615f, 1.46f, 1.304f, 1.214f, 1.124f, 1.082f, 1.039f, 1.03f, 1.02f, 1.033f, 1.046f, 1.092f, 1.139f, 1.234f, 1.328f, 1.489f, 1.65f,
1.59f, 1.437f, 1.284f, 1.198f, 1.112f, 1.07f, 1.028f, 1.019f, 1.01f, 1.023f, 1.037f, 1.082f, 1.126f, 1.217f, 1.308f, 1.469f, 1.63f,
1.565f, 1.414f, 1.264f, 1.182f, 1.099f, 1.058f, 1.018f, 1.009f, 1.0f, 1.014f, 1.028f, 1.071f, 1.114f, 1.201f, 1.288f, 1.449f, 1.609f,
1.59f, 1.437f, 1.284f, 1.199f, 1.114f, 1.072f, 1.03f, 1.02f, 1.011f, 1.024f, 1.038f, 1.083f, 1.129f, 1.219f, 1.308f, 1.472f, 1.635f,
1.616f, 1.46f, 1.303f, 1.216f, 1.128f, 1.084f, 1.041f, 1.031f, 1.022f, 1.034f, 1.047f, 1.096f, 1.144f, 1.236f, 1.329f, 1.495f, 1.661f,
1.681f, 1.519f, 1.358f, 1.267f, 1.176f, 1.13f, 1.084f, 1.074f, 1.063f, 1.076f, 1.09f, 1.141f, 1.192f, 1.29f, 1.388f, 1.558f, 1.728f,
1.746f, 1.58f, 1.413f, 1.319f, 1.225f, 1.176f, 1.127f, 1.116f, 1.104f, 1.118f, 1.133f, 1.187f, 1.241f, 1.344f, 1.447f, 1.622f, 1.796f,
1.871f, 1.7f, 1.53f, 1.427f, 1.324f, 1.27f, 1.216f, 1.202f, 1.189f, 1.206f, 1.223f, 1.282f, 1.34f, 1.453f, 1.566f, 1.739f, 1.912f,
1.996f, 1.821f, 1.646f, 1.535f, 1.424f, 1.364f, 1.305f, 1.289f, 1.274f, 1.293f, 1.313f, 1.376f, 1.44f, 1.562f, 1.684f, 1.856f, 2.027f};

static float* lsctable0[6] = { A_lsc0,  tl84_lsc0, cwf_lsc0,cwf_lsc0 ,d65_lsc0 , high_lsc0 };
static float* lsctable1[6] = { A_lsc1,  tl84_lsc1, cwf_lsc1,cwf_lsc1 ,d65_lsc1 , high_lsc1 };
static float* lsctable2[6] = { A_lsc2,  tl84_lsc2, cwf_lsc2,cwf_lsc2 ,d65_lsc2 , high_lsc2 };

//static float* lsctable0[6] = { A_lsc0,  A_lsc0, A_lsc0,A_lsc0 ,A_lsc0 , A_lsc0 };
//static float* lsctable1[6] = { A_lsc0,  A_lsc0, A_lsc0,A_lsc0 ,A_lsc0 , A_lsc0 };
//static float* lsctable2[6] = { A_lsc0,  A_lsc0, A_lsc0,A_lsc0 ,A_lsc0 , A_lsc0 };

static float left_rg_list[20] = {0};
static float left_bg_list[20] = { 0 };
static float right_rg_list[20] = {0};
static float right_bg_list[20] = { 0 };
static int left_frame_num = 0;
static int right_frame_num = 0;

enum LogLevel                   last_debug_level;  //default off
int                            last_save_to_file;  //default false

//void time_series(float left_wp, float right_wp);

void time_series(int identityid, float rg, float bg) {
    if (identityid == 0) {
        if (left_frame_num < 20) {
            left_rg_list[left_frame_num] = rg;
            left_bg_list[left_frame_num] = bg;
        }
        else
        {
            for (int j = 0; j < 19; j++) {
                left_rg_list[j] = left_rg_list[j + 1];
                left_bg_list[j] = left_bg_list[j + 1];
            }
            left_rg_list[19] = rg;
            left_bg_list[19] = bg;
        }
        left_frame_num++;
        if (left_frame_num > 10000) {
            left_frame_num = 20;
        }
    }
    else if (identityid == 1) {
        if (right_frame_num < 20) {
            right_rg_list[right_frame_num] = rg;
            right_bg_list[right_frame_num] = bg;
        }
        else
        {
            for (int j = 0; j < 19; j++) {
                right_rg_list[j] = right_rg_list[j + 1];
                right_bg_list[j] = right_bg_list[j + 1];
            }
            right_rg_list[19] = rg;
            right_bg_list[19] = bg;
        }
        right_frame_num++;
        if (right_frame_num > 10000) {
            right_frame_num = 20;
        }
    }
    //for (int j = 0; j < 19; j++) {
    //    printf("frame:  %d,  left rg: %f, right rg: %f\r\n", j, left_rg_list[j], right_rg_list[j]);
    //}
};

unsigned int awb_initial(gxr_awb* gxr_awb)
{
    
    unsigned int awb_err = _AL_AWBLIB_SUCCESS;
    unsigned int awb_bin_size = 32 * 32;
    struct allib_awb_runtime_obj* awb_obj = (struct allib_awb_runtime_obj*) gxr_awb->awb_obj; 
    awb_obj = (struct allib_awb_runtime_obj*)malloc(sizeof(struct allib_awb_runtime_obj));


    awb_err = allib_awb_loadfunc(awb_obj);
    if (awb_err != _AL_AWBLIB_SUCCESS) {
        printf("ERROR %x\r\n", (unsigned int)awb_err);
        return awb_err;
    }

    // struct allib_awb_runtime_obj *awb_obj = gxr_awb->awb_obj; 
    struct allib_awb_set_parameter *awb_set_para = &(gxr_awb->awb_set_para);
    struct allib_awb_get_parameter *awb_get_para = &(gxr_awb->awb_get_para);

    awb_err = awb_obj->initial(awb_obj, awb_bin_size);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }

    awb_set_para->type = ALAWB_SET_PARAM_CAMERA_CALIB_DATA;
    awb_err = awb_obj->set_param(awb_set_para, awb_obj->awb);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }

    awb_get_para->type = ALAWB_GET_PARAM_INIT_SETTING;
    awb_err = awb_obj->get_param(awb_get_para, awb_obj->awb);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }
    gxr_awb->awb_obj = awb_obj;

    //debug level get from init
    allib_ae_set_debug_log_flag((enum LogLevel_em)Log_OFF, 0);
    last_debug_level = Log_OFF;  //default off
    last_save_to_file = 0;  //default false

    return awb_err;
};


unsigned int awb_run(gxr_awb *gxr_awb)
{
    unsigned int awb_err = _AL_AWBLIB_SUCCESS;

    struct allib_awb_runtime_obj *awb_obj = (struct allib_awb_runtime_obj*) gxr_awb->awb_obj; 
    struct allib_awb_set_parameter *awb_set_para = &(gxr_awb->awb_set_para);
    struct allib_awb_output_data *awb_output = &(gxr_awb->awb_output);

    if (gxr_awb->debug_level != last_debug_level || gxr_awb->save_to_file != last_save_to_file) {  //or another tag for log level modify action   //or expose the func, tooler directly call to modify 
        allib_ae_set_debug_log_flag((enum LogLevel_em)gxr_awb->debug_level, gxr_awb->save_to_file);
        last_debug_level = gxr_awb->debug_level;
        last_save_to_file = gxr_awb->save_to_file;
    }

    awb_err = awb_obj->set_param(awb_set_para, awb_obj->awb);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }

    awb_err = awb_obj->process(gxr_awb->awb_stats, awb_obj->awb, awb_output, NULL);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }


    int r_gain = gxr_awb->awb_output.wbgain.r_gain;
    int b_gain = gxr_awb->awb_output.wbgain.b_gain;
    int min_indx, min2_indx;
    float weight1, weight2;
    int dist[6] = {0};
    for (int i = 0; i < 6; i++) {
        dist[i] = (int)sqrt(pow(r_gain - (int)(std_wp[i][0]), 2)) + (int)sqrt(pow(b_gain - (int)(std_wp[i][1]), 2));
        //dist[i] = 144 + i;
    }
    sort_wp(dist, 6, &min_indx, &min2_indx);

    weight1 = dist[min2_indx] /(float)(dist[min_indx] + dist[min2_indx]);
    weight2 = 1 - weight1;

    //for (int i = 0; i < 9; i++) {
    //    gxr_awb->awb_output.final_CCM[i] = weight1 * ccm_list[min_indx][i] + weight2 * ccm_list[min2_indx][i];
    //}

    gxr_awb->awb_output.final_CCM[0] = 1.0;
    gxr_awb->awb_output.final_CCM[1] = 0.0;
    gxr_awb->awb_output.final_CCM[2] = 0.0;
    gxr_awb->awb_output.final_CCM[3] = 0.0;
    gxr_awb->awb_output.final_CCM[4] = 1.0;
    gxr_awb->awb_output.final_CCM[5] = 0.0;
    gxr_awb->awb_output.final_CCM[6] = 0.0;
    gxr_awb->awb_output.final_CCM[7] = 0.0;
    gxr_awb->awb_output.final_CCM[8] = 1.0;

    for (int i = 0; i < 13*17; i++) {
        gxr_awb->awb_output.final_lsc[i] = weight1 * lsctable0[min_indx][i] + weight2 * lsctable0[min2_indx][i];
        gxr_awb->awb_output.final_lsc[i+13*17] = weight1 * lsctable1[min_indx][i] + weight2 * lsctable1[min2_indx][i];
        gxr_awb->awb_output.final_lsc[i + 2 * 13 * 17] = weight1 * lsctable1[min_indx][i] + weight2 * lsctable1[min2_indx][i];
        gxr_awb->awb_output.final_lsc[i + 3 * 13 * 17] = weight1 * lsctable2[min_indx][i] + weight2 * lsctable2[min2_indx][i];
    }

    if (gxr_awb->awb_output.wbgain.r_gain == 0) {
        gxr_awb->awb_output.wbgain.r_gain = std_wp[5][0];
        gxr_awb->awb_output.wbgain.g_gain = 100;
        gxr_awb->awb_output.wbgain.b_gain = std_wp[5][1];
        gxr_awb->awb_output.color_temp = 6449;
    }
    else {
        gxr_awb->awb_output.wbgain.r_gain = (int)(gxr_awb->awb_output.wbgain.r_gain / 256.0f * 100);
        gxr_awb->awb_output.wbgain.g_gain = 100;
        gxr_awb->awb_output.wbgain.b_gain = (int)(gxr_awb->awb_output.wbgain.b_gain / 256.0f * 100);
    }
    time_series(gxr_awb->identityid, gxr_awb->awb_output.wbgain.r_gain / 100.0f, gxr_awb->awb_output.wbgain.b_gain / 100.0f);

    LOG_WARN("[WhiteBox] before smoothRGB: %3d %3d %3d\r\n", gxr_awb->awb_output.wbgain.r_gain, gxr_awb->awb_output.wbgain.g_gain, gxr_awb->awb_output.wbgain.b_gain);
    float rg, bg;
    if (left_frame_num >= 20 || right_frame_num >= 20) {
        if (gxr_awb->identityid = 0 && left_frame_num >= 20) {
            rg = 0.4 * left_rg_list[19] + 0.3 * left_rg_list[18] + 0.2 * left_rg_list[17] + 0.1 * left_rg_list[16];
            bg = 0.4 * left_bg_list[19] + 0.3 * left_bg_list[18] + 0.2 * left_bg_list[17] + 0.1 * left_bg_list[16];
            gxr_awb->awb_output.wbgain.r_gain = (int)(rg * 100);
            gxr_awb->awb_output.wbgain.g_gain = 100;
            gxr_awb->awb_output.wbgain.b_gain = (int)(bg * 100);
        }
        else if(gxr_awb->identityid = 1 && right_frame_num >= 20)
        {
            rg = 0.4 * right_rg_list[19] + 0.3 * right_rg_list[18] + 0.2 * right_rg_list[17] + 0.1 * right_rg_list[16];
            bg = 0.4 * right_bg_list[19] + 0.3 * right_bg_list[18] + 0.2 * right_bg_list[17] + 0.1 * right_bg_list[16];
            gxr_awb->awb_output.wbgain.r_gain = (int)(rg * 100);
            gxr_awb->awb_output.wbgain.g_gain = 100;
            gxr_awb->awb_output.wbgain.b_gain = (int)(bg * 100);
        }
    }
    LOG_WARN("[WhiteBox] after smoothRGB: %3d %3d %3d\r\n", gxr_awb->awb_output.wbgain.r_gain, gxr_awb->awb_output.wbgain.g_gain, gxr_awb->awb_output.wbgain.b_gain);
    
    printf("min, min2 %d %d\r\n", min_indx, min2_indx);
    return awb_err;
}


unsigned int awb_deinit(gxr_awb *gxr_awb)
{
    unsigned int awb_err = _AL_AWBLIB_SUCCESS;
    struct allib_awb_runtime_obj *awb_obj = (struct allib_awb_runtime_obj*) gxr_awb->awb_obj; 

    awb_err = awb_obj->deinit(awb_obj);
    if(awb_err != _AL_AWBLIB_SUCCESS) {
        return awb_err;
    }
    return awb_err;
}


void sort_wp(int* a, int l, int* minInd, int* min2Ind)//a为数组地址，l为数组长度。
{
    int i; 
    int min = 100000;
    int min2 = 100000;
    int min_index = 0; int min2_index = 0;
    //排序主体
    for (i = 0; i < l - 1; i++)
        if (a[i] < min2)
        {
            min2 = a[i];
            min2_index = i;
            if (a[i] < min) {
                min2 = min;
                min = a[i];
                min2_index = min_index;
                min_index = i;
            }
        }
    *minInd = min_index;
    *min2Ind = min2_index;
}




